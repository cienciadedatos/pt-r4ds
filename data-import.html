<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Hadley Wickham, Mine Çetinkaya-Rundel, e Garrett Grolemund">
<title>R para Ciência de Dados (2ª edição) - 7&nbsp; ✅ Importação de dados</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./workflow-help.html" rel="next">
<link href="./workflow-scripts.html" rel="prev">
<link href="./cover.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script><script defer="" data-domain="r4ds.hadley.nz" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./whole-game.html">✅ Visão geral</a></li><li class="breadcrumb-item"><a href="./data-import.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">✅ Importação de dados</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R para Ciência de Dados (2ª edição)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cienciadedatos/pt-r4ds/" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo de leitor">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Boas-vindas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface-2e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Prefácio da segunda edição</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Introdução</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Visão geral</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">✅ Visualização de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">✅ Fluxo de Trabalho: básico</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">✅ Transformação de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: estilo de código</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">✅ Organizando os dados (<em>data tidying</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: scripts e projetos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-import.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">✅ Importação de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: obtendo ajuda</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Visualizar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">✅ Camadas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exploratory data analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Communication</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Transformar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logicals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">✅ Vetores lógicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">✅ Números</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regexps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Regular expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">✅ Fatores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dates and times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missing-values.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">✅ Valores faltantes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Joins</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Importar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">✅ Planilhas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">✅ Bancos de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./arrow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">✅ Arrow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rectangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Hierarchical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">✅ Raspagem de dados (<em>Web scraping</em>)</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Programar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">✅ Funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Iteration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./base-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">✅ Um guia para o R base</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Comunicar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">✅ Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">✅ Formatos para Quarto</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li>
<a href="#introdu%C3%A7%C3%A3o" id="toc-introdução" class="nav-link active" data-scroll-target="#introdu%C3%A7%C3%A3o"><span class="header-section-number">7.1</span> Introdução</a>
  <ul class="collapse">
<li><a href="#pr%C3%A9-requisitos" id="toc-pré-requisitos" class="nav-link" data-scroll-target="#pr%C3%A9-requisitos"><span class="header-section-number">7.1.1</span> Pré-requisitos</a></li>
  </ul>
</li>
  <li>
<a href="#lendo-dados-de-um-arquivo" id="toc-lendo-dados-de-um-arquivo" class="nav-link" data-scroll-target="#lendo-dados-de-um-arquivo"><span class="header-section-number">7.2</span> Lendo dados de um arquivo</a>
  <ul class="collapse">
<li><a href="#dicas-pr%C3%A1ticas" id="toc-dicas-práticas" class="nav-link" data-scroll-target="#dicas-pr%C3%A1ticas"><span class="header-section-number">7.2.1</span> Dicas práticas</a></li>
  <li><a href="#outros-argumentos" id="toc-outros-argumentos" class="nav-link" data-scroll-target="#outros-argumentos"><span class="header-section-number">7.2.2</span> Outros argumentos</a></li>
  <li><a href="#outros-tipos-de-arquivos" id="toc-outros-tipos-de-arquivos" class="nav-link" data-scroll-target="#outros-tipos-de-arquivos"><span class="header-section-number">7.2.3</span> Outros tipos de arquivos</a></li>
  <li><a href="#exerc%C3%ADcios" id="toc-exercícios" class="nav-link" data-scroll-target="#exerc%C3%ADcios"><span class="header-section-number">7.2.4</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#sec-col-types" id="toc-sec-col-types" class="nav-link" data-scroll-target="#sec-col-types"><span class="header-section-number">7.3</span> Controlando tipos de colunas</a>
  <ul class="collapse">
<li><a href="#adivinhando-tipos" id="toc-adivinhando-tipos" class="nav-link" data-scroll-target="#adivinhando-tipos"><span class="header-section-number">7.3.1</span> Adivinhando tipos</a></li>
  <li><a href="#valores-ausentes-tipos-de-coluna-e-problemas" id="toc-valores-ausentes-tipos-de-coluna-e-problemas" class="nav-link" data-scroll-target="#valores-ausentes-tipos-de-coluna-e-problemas"><span class="header-section-number">7.3.2</span> Valores ausentes, tipos de coluna e problemas</a></li>
  <li><a href="#tipos-de-colunas" id="toc-tipos-de-colunas" class="nav-link" data-scroll-target="#tipos-de-colunas"><span class="header-section-number">7.3.3</span> Tipos de colunas</a></li>
  </ul>
</li>
  <li><a href="#sec-readr-directory" id="toc-sec-readr-directory" class="nav-link" data-scroll-target="#sec-readr-directory"><span class="header-section-number">7.4</span> Importando dados de múltiplos arquivos</a></li>
  <li><a href="#sec-writing-to-a-file" id="toc-sec-writing-to-a-file" class="nav-link" data-scroll-target="#sec-writing-to-a-file"><span class="header-section-number">7.5</span> Exportando para um arquivo</a></li>
  <li><a href="#entrada-de-dados" id="toc-entrada-de-dados" class="nav-link" data-scroll-target="#entrada-de-dados"><span class="header-section-number">7.6</span> Entrada de dados</a></li>
  <li><a href="#resumo" id="toc-resumo" class="nav-link" data-scroll-target="#resumo"><span class="header-section-number">7.7</span> Resumo</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/cienciadedatos/pt-r4ds/edit/main/data-import.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/cienciadedatos/pt-r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./whole-game.html">✅ Visão geral</a></li><li class="breadcrumb-item"><a href="./data-import.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">✅ Importação de dados</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-data-import" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">✅ Importação de dados</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="introdução" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="introdução">
<span class="header-section-number">7.1</span> Introdução</h2>
<p>Trabalhar com dados fornecidos por pacotes em R é uma ótima maneira de aprender ferramentas de ciência de dados, mas você irá querer aplicar o que aprendeu aos seus próprios dados em algum momento. Neste capítulo, você aprenderá o básico sobre como ler arquivos de dados no R.</p>
<p>Especificamente, esse capítulo focará na leitura de arquivos de texto retangulares. Começaremos com conselhos práticos para lidar com recursos como nomes de colunas, tipos e dados ausentes. Você então aprenderá sobre como ler dados de múltiplos arquivos de uma única vez e exportar dados do R para um arquivo. Finalmente, você aprenderá a criar manualmente data frames no R.</p>
<section id="pré-requisitos" class="level3" data-number="7.1.1"><h3 data-number="7.1.1" class="anchored" data-anchor-id="pré-requisitos">
<span class="header-section-number">7.1.1</span> Pré-requisitos</h3>
<p>Neste capítulo, você irá aprender como importar arquivos de texto no R com o pacote <strong>readr</strong>, que faz parte do tidyverse.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="lendo-dados-de-um-arquivo" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="lendo-dados-de-um-arquivo">
<span class="header-section-number">7.2</span> Lendo dados de um arquivo</h2>
<p>De início, vamos focar no tipo de arquivo de dados retangulares mais comum: CSV, que é a sigla em inglês para valores separados por vírgula (<em>comma-separated values</em>)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Aqui está como um arquivo CSV simples se parece. A primeira linha, comumente chamada de linha de cabeçalho, fornece os nomes das colunas, e as seis linhas seguintes fornecem os dados. As colunas são separadas, ou delimitadas, por vírgulas.</p>
<div class="cell">
<pre><code>ID Estudante,Nome Completo,comida.favorita,planoAlimentar,IDADE
1,Pedro Cardoso,Iogurte de morango,Só almoço,4     
2,Rafaela Lorenzoni,Batata frita,Só almoço,5       
3,Otávio Barros,N/A,Café da manhã e almoço,7       
4,Fernanda Melo,Brócolis,Só almoço,NA
5,Leopoldo Souza,Pizza,Café da manhã e almoço,cinco
6,Pérola Silva,Sorvete,Só almoço,6</code></pre>
</div>
<p><a href="#tbl-estudantes-table" class="quarto-xref">Tabela&nbsp;<span>7.1</span></a> mostra uma representação dos mesmos dados como uma tabela.</p>
<div class="cell">
<div id="tbl-estudantes-table" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-estudantes-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;7.1: Dados do arquivo estudantes.csv como uma tabela.
</figcaption><div aria-describedby="tbl-estudantes-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 22%">
<col style="width: 24%">
<col style="width: 29%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">ID Estudante</th>
<th style="text-align: left;">Nome Completo</th>
<th style="text-align: left;">comida.favorita</th>
<th style="text-align: left;">planoAlimentar</th>
<th style="text-align: left;">IDADE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Pedro Cardoso</td>
<td style="text-align: left;">Iogurte de morango</td>
<td style="text-align: left;">Só almoço</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Rafaela Lorenzoni</td>
<td style="text-align: left;">Batata frita</td>
<td style="text-align: left;">Só almoço</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Otávio Barros</td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">Café da manhã e almoço</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Fernanda Melo</td>
<td style="text-align: left;">Brócolis</td>
<td style="text-align: left;">Só almoço</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Leopoldo Souza</td>
<td style="text-align: left;">Pizza</td>
<td style="text-align: left;">Café da manhã e almoço</td>
<td style="text-align: left;">cinco</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Pérola Silva</td>
<td style="text-align: left;">Sorvete</td>
<td style="text-align: left;">Só almoço</td>
<td style="text-align: left;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Podemos ler esse arquivo em R usando <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>. O primeiro argumento é o mais importante: o caminho para o arquivo. Você pode pensar no caminho como um endereço do arquivo: o nome do arquivo é <code>estudantes.csv</code> e ele está armazenado na pasta <code>data</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/estudantes.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 6 Columns: 5</span></span>
<span><span class="co">#&gt; ── Column specification ─────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (4): Nome Completo, comida.favorita, planoAlimentar, IDADE</span></span>
<span><span class="co">#&gt; dbl (1): ID Estudante</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O código acima irá funcionar se você tiver o arquivo <code>estudantes.csv</code> em uma pasta chamada <code>data</code> no seu projeto. Você pode baixar o arquivo <code>estudantes.csv</code> de <a href="https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/estudantes.csv" class="uri">https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/estudantes.csv</a> ou você pode importá-lo diretamente dessa URL com:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/estudantes.csv"</span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando você executa o comando <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>, ele imprime uma mensagem informando o número de linhas e colunas de dados, o delimitador que foi usado e as especificações das colunas (nomes das colunas organizados pelo tipo de dados que a coluna contém). Ele também imprime algumas informações sobre como recuperar a especificação completa da coluna e como silenciar essa mensagem. Essa mensagem é uma parte integral do readr, e voltaremos a ela em <a href="#sec-col-types" class="quarto-xref"><span>Seção 7.3</span></a>.</p>
<section id="dicas-práticas" class="level3" data-number="7.2.1"><h3 data-number="7.2.1" class="anchored" data-anchor-id="dicas-práticas">
<span class="header-section-number">7.2.1</span> Dicas práticas</h3>
<p>Após importar os dados, o próximo passo geralmente envolve transformá-los de um jeito que facilite o trabalho no restante da sua análise. Com isso em mente, vamos dar uma segunda olhada no conjunto de dados <code>estudantes</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   `ID Estudante` `Nome Completo`   comida.favorita    planoAlimentar    IDADE</span></span>
<span><span class="co">#&gt;            &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1              1 Pedro Cardoso     Iogurte de morango Só almoço         4    </span></span>
<span><span class="co">#&gt; 2              2 Rafaela Lorenzoni Batata frita       Só almoço         5    </span></span>
<span><span class="co">#&gt; 3              3 Otávio Barros     N/A                Café da manhã e … 7    </span></span>
<span><span class="co">#&gt; 4              4 Fernanda Melo     Brócolis           Só almoço         &lt;NA&gt; </span></span>
<span><span class="co">#&gt; 5              5 Leopoldo Souza    Pizza              Café da manhã e … cinco</span></span>
<span><span class="co">#&gt; 6              6 Pérola Silva      Sorvete            Só almoço         6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Na coluna <code>comida.favorita</code>, há uma série de itens de comida, e o texto (<em>string</em>) <code>"N/A"</code>, que deveria ter sido um <code>NA</code> real que o R reconheceria como um dado faltante (<em>not available</em>). Isso é algo que podemos resolver usando o argumento <code>na</code>. Por padrão, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> reconhece apenas strings vazias (<code>""</code>) como <code>NA</code>s, mas, para esse conjunto de dados, também queremos que ele reconheça a <em>string</em> de caracteres <code>"N/A"</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/estudantes.csv"</span>, na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N/A"</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">estudantes</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   `ID Estudante` `Nome Completo`   comida.favorita    planoAlimentar    IDADE</span></span>
<span><span class="co">#&gt;            &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1              1 Pedro Cardoso     Iogurte de morango Só almoço         4    </span></span>
<span><span class="co">#&gt; 2              2 Rafaela Lorenzoni Batata frita       Só almoço         5    </span></span>
<span><span class="co">#&gt; 3              3 Otávio Barros     &lt;NA&gt;               Café da manhã e … 7    </span></span>
<span><span class="co">#&gt; 4              4 Fernanda Melo     Brócolis           Só almoço         NA   </span></span>
<span><span class="co">#&gt; 5              5 Leopoldo Souza    Pizza              Café da manhã e … cinco</span></span>
<span><span class="co">#&gt; 6              6 Pérola Silva      Sorvete            Só almoço         6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você também pode notar que as colunas <code>ID Estudante</code> e <code>Nome Completo</code> estão cercadas por crases. Isso ocorre porque elas contêm espaços, quebrando as regras usuais do R para nomes de variáveis; elas são nomes <strong>não-sintáticos</strong>. Para se referir a essas variáveis, você precisa cercá-las com crases, <code>`</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span></span>
<span>    id_estudante <span class="op">=</span> <span class="va">`ID Estudante`</span>,</span>
<span>    nome_completo <span class="op">=</span> <span class="va">`Nome Completo`</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida.favorita    planoAlimentar      IDADE</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço           4    </span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço           5    </span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al… 7    </span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço           NA   </span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al… cinco</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço           6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Uma abordagem alternativa é usar <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html">janitor::clean_names()</a></code> para transformar todos os nomes de variáveis em <em>snake case</em> de uma só vez<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">|&gt;</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço           4    </span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço           5    </span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al… 7    </span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço           NA   </span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al… cinco</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço           6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Outra tarefa comum após a leitura dos dados é examinar os tipos de variáveis. Por exemplo, <code>plano_alimentar</code> é uma variável categórica com um conjunto conhecido de valores possíveis, que no R deve ser representado como um fator:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>plano_alimentar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">plano_alimentar</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;fct&gt;               &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço           4    </span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço           5    </span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al… 7    </span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço           NA   </span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al… cinco</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço           6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note que os valores em <code>plano_alimentar</code> permaneceram os mesmos, mas o tipo de variável denotado abaixo do nome da variável mudou de caractere (<code>&lt;chr&gt;</code>) para fator (<code>&lt;fct&gt;</code>). Você aprenderá mais sobre fatores em <a href="factors.html" class="quarto-xref"><span>Capítulo 16</span></a>.</p>
<p>Antes de analisar esses dados, você provavelmente vai querer corrigir as colunas <code>idade</code> e <code>id</code>. Atualmente, <code>idade</code> é uma variável de caractere porque uma das observações está digitada como <code>cinco</code> em vez de um <code>5</code> numérico. Discutiremos os detalhes de como corrigir esse problema em <a href="spreadsheets.html" class="quarto-xref"><span>Capítulo 20</span></a>.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span> <span class="op">&lt;-</span> <span class="va">estudantes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    plano_alimentar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">plano_alimentar</span><span class="op">)</span>,</span>
<span>    idade <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">idade</span> <span class="op">==</span> <span class="st">"cinco"</span>, <span class="st">"5"</span>, <span class="va">idade</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">estudantes</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço               4</span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço               5</span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al…     7</span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço              NA</span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al…     5</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço               6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Uma nova função aqui é <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>, que tem três argumentos. O primeiro argumento <code>test</code> deve ser um vetor lógico. O resultado conterá o valor do segundo argumento, <code>yes</code>, quando <code>test</code> é <code>TRUE</code>, e o valor do terceiro argumento, <code>no</code>, quando é <code>FALSE</code>. Aqui estamos dizendo que se <code>idade</code> é a <em>string</em> de caracteres <code>"cinco"</code>, faça-a <code>"5"</code>, e se não, mantenha-a como <code>idade</code>. Você aprenderá mais sobre <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> e vetores lógicos em <a href="logicals.html" class="quarto-xref"><span>Capítulo 12</span></a>.</p>
</section><section id="outros-argumentos" class="level3" data-number="7.2.2"><h3 data-number="7.2.2" class="anchored" data-anchor-id="outros-argumentos">
<span class="header-section-number">7.2.2</span> Outros argumentos</h3>
<p>Há alguns outros argumentos importantes que precisamos mencionar, e eles serão mais fáceis de demonstrar se primeiro mostrarmos um truque útil: <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> pode ler <em>strings</em> de texto que você criou e formatou como um arquivo CSV:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"a,b,c</span></span>
<span><span class="st">  1,2,3</span></span>
<span><span class="st">  4,5,6"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;       a     b     c</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2     3</span></span>
<span><span class="co">#&gt; 2     4     5     6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Normalmente, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> usa a primeira linha de dados como os nomes das colunas, o que é uma convenção muito comum. Mas não é incomum que algumas linhas de metadados sejam incluídas no início do arquivo. Você pode usar <code>skip = n</code> para pular as primeiras <code>n</code> linhas ou usar <code>comment = "#"</code> para ignorar todas as linhas que começam com <code>#</code>, por exemplo:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"A primeira linha de metadados</span></span>
<span><span class="st">  A segunda linha de metadados</span></span>
<span><span class="st">  x,y,z</span></span>
<span><span class="st">  1,2,3"</span>,</span>
<span>  skip <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;       x     y     z</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2     3</span></span>
<span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"# Um comentário que gostaria de ignorar</span></span>
<span><span class="st">  x,y,z</span></span>
<span><span class="st">  1,2,3"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"#"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;       x     y     z</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2     3</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Em outros casos, os dados podem não ter nomes de colunas. Você pode usar <code>col_names = FALSE</code> para dizer ao <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> para não tratar a primeira linha como cabeçalho e, em vez disso, rotular as colunas sequencialmente de <code>X1</code> a <code>Xn</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"1,2,3</span></span>
<span><span class="st">  4,5,6"</span>,</span>
<span>  col_names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;      X1    X2    X3</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2     3</span></span>
<span><span class="co">#&gt; 2     4     5     6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternativamente, você pode fornecer à <code>col_names</code> um vetor de caracteres que será usado como os nomes das colunas:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"1,2,3</span></span>
<span><span class="st">  4,5,6"</span>,</span>
<span>  col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;       x     y     z</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2     3</span></span>
<span><span class="co">#&gt; 2     4     5     6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Esses argumentos são tudo o que você precisa saber para ler a maioria dos arquivos CSV que você encontrará na prática. (Para o restante, você precisará inspecionar cuidadosamente seu arquivo <code>.csv</code> e ler a documentação para os muitos outros argumentos de <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>.)</p>
</section><section id="outros-tipos-de-arquivos" class="level3" data-number="7.2.3"><h3 data-number="7.2.3" class="anchored" data-anchor-id="outros-tipos-de-arquivos">
<span class="header-section-number">7.2.3</span> Outros tipos de arquivos</h3>
<p>Uma vez que você tenha aprendido a usar <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>, usar as outras funções do readr é simples; é apenas uma questão de saber qual função usar:</p>
<ul>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv2()</a></code> lê arquivos separados por ponto-e-vírgula. Usa <code>;</code> ao invés de <code>,</code> para separar os campos, e são comuns em países que usam <code>,</code> como marcador decimal.</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> lê arquivos delimitados por tabulação.</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> lê arquivos com qualquer delimitador, tentando supor automaticamente o delimitador se você não o especificar.</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code> lê arquivos de largura fixa. Você pode especificar os campos por suas larguras com <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">fwf_widths()</a></code> ou por suas posições com <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">fwf_positions()</a></code>.</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_table.html">read_table()</a></code> lê uma variação comum de arquivos de largura fixa onde as colunas são separadas por espaços em branco.</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_log.html">read_log()</a></code> lê arquivos de log no estilo Apache.</p></li>
</ul></section><section id="exercícios" class="level3" data-number="7.2.4"><h3 data-number="7.2.4" class="anchored" data-anchor-id="exercícios">
<span class="header-section-number">7.2.4</span> Exercícios</h3>
<ol type="1">
<li><p>Que função você usaria para ler um arquivo onde os campos são separados por <code>|</code>?</p></li>
<li><p>Além de <code>file</code>, <code>skip</code> e <code>comment</code>, quais outros argumentos <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> e <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> têm em comum?</p></li>
<li><p>Quais são os argumentos mais importantes para <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code>?</p></li>
<li>
<p>Às vezes, as <em>strings</em> em um arquivo CSV contêm vírgulas. Para evitar que elas causem problemas, elas precisam ser cercadas por um caractere de citação, como <code>"</code> ou <code>'</code>. Por padrão, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> assume que o caractere de citação será <code>"</code>. Para ler o seguinte texto em um data frame, que argumento para <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> você precisa especificar?</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="st">"x,y\n1,'a,b'"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li>
<p>Identifique o que está errado com cada um dos seguintes arquivos CSV em linha. O que acontece quando você executa o código?</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n1,2,3\n4,5,6"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b,c\n1,2\n1,2,3,4"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n\"1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n1,2\na,b"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a;b\n1;3"</span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li>
<p>Pratique se referir a nomes não-sintáticos no seguinte data frame:</p>
<ol type="a">
<li>Extraindo a variável chamada <code>1</code>.</li>
<li>Plotando um gráfico de dispersão de <code>1</code> vs.&nbsp;<code>2</code>.</li>
<li>Criando uma nova coluna chamada <code>3</code>, que é <code>2</code> dividido por <code>1</code>.</li>
<li>Renomeando as colunas para <code>um</code>, <code>dois</code> e <code>três</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">irritante</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  `1` <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  `2` <span class="op">=</span> <span class="va">`1`</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">`1`</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ol></section></section><section id="sec-col-types" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="sec-col-types">
<span class="header-section-number">7.3</span> Controlando tipos de colunas</h2>
<p>Um arquivo CSV não contém informações sobre o tipo de cada variável (ou seja, se é lógico, número, <em>string</em>, etc.), então readr tentará adivinhar o tipo. Esta seção descreve como o processo de adivinhação funciona, como resolver alguns problemas comuns que fazem com que ele falhe e, se necessário, como fornecer os tipos de coluna você mesmo. Por fim, mencionaremos algumas estratégias gerais que são úteis se o readr estiver falhando catastróficamente e você precisar obter mais informações sobre a estrutura do seu arquivo.</p>
<section id="adivinhando-tipos" class="level3" data-number="7.3.1"><h3 data-number="7.3.1" class="anchored" data-anchor-id="adivinhando-tipos">
<span class="header-section-number">7.3.1</span> Adivinhando tipos</h3>
<p>O pacote readr usa uma heurística para descobrir os tipos de coluna. Para cada coluna, ele pega os valores de 1.000<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> linhas espaçadas uniformemente da primeira à última, ignorando os valores ausentes. Ele então trabalha através das seguintes perguntas:</p>
<ul>
<li>Contém apenas <code>F</code>, <code>T</code>, <code>FALSE</code> ou <code>TRUE</code> (ignorando a caixa alta)? Se sim, é um lógico.</li>
<li>Contém apenas números (por exemplo, <code>1</code>, <code>-4.5</code>, <code>5e6</code>, <code>Inf</code>)? Se sim, é um número.</li>
<li>Corresponde ao padrão ISO8601? Se sim, é uma data ou data-hora. (Voltaremos às data-horas em mais detalhes em <a href="datetimes.html#sec-creating-datetimes" class="quarto-xref"><span>Seção 17.2</span></a>).</li>
<li>Caso contrário, deve ser uma <em>string</em>.</li>
</ul>
<p>Você pode ver esse comportamento em ação neste exemplo simples:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  logico,numerico,data,string</span></span>
<span><span class="st">  TRUE,1,2021-01-15,abc</span></span>
<span><span class="st">  false,4.5,2021-02-15,def</span></span>
<span><span class="st">  T,Inf,2021-02-16,ghi</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span><span class="co">#&gt;   logico numerico data       string</span></span>
<span><span class="co">#&gt;   &lt;lgl&gt;     &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt; </span></span>
<span><span class="co">#&gt; 1 TRUE        1   2021-01-15 abc   </span></span>
<span><span class="co">#&gt; 2 FALSE       4.5 2021-02-15 def   </span></span>
<span><span class="co">#&gt; 3 TRUE      Inf   2021-02-16 ghi</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Essa heurística funciona bem se você tiver um conjunto de dados limpo, mas, na vida real, você encontrará uma seleção de falhas estranhas e belas.</p>
</section><section id="valores-ausentes-tipos-de-coluna-e-problemas" class="level3" data-number="7.3.2"><h3 data-number="7.3.2" class="anchored" data-anchor-id="valores-ausentes-tipos-de-coluna-e-problemas">
<span class="header-section-number">7.3.2</span> Valores ausentes, tipos de coluna e problemas</h3>
<p>A forma mais comum de falha na detecção de coluna é quando uma coluna contém valores inesperados, e você obtém uma coluna de caracteres em vez de um tipo mais específico. Uma das causas mais comuns para isso é um valor ausente registrado usando algo diferente do <code>NA</code> que o readr espera.</p>
<p>Considere este exemplo simples de um arquivo CSV com 1 coluna:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">simple_csv</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  x</span></span>
<span><span class="st">  10</span></span>
<span><span class="st">  .</span></span>
<span><span class="st">  20</span></span>
<span><span class="st">  30"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se o lermos sem argumentos adicionais, <code>x</code> se torna uma coluna de caracteres:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">simple_csv</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 1</span></span>
<span><span class="co">#&gt;   x    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 10   </span></span>
<span><span class="co">#&gt; 2 .    </span></span>
<span><span class="co">#&gt; 3 20   </span></span>
<span><span class="co">#&gt; 4 30</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nesse pequeno exemplo, você pode ver facilmente o valor ausente <code>.</code>. Mas o que acontece se você tiver milhares de linhas com apenas alguns valores ausentes representados por <code>.</code>s espalhados entre eles? Uma abordagem é dizer ao readr que <code>x</code> é uma coluna numérica e, em seguida, ver onde ele falha. Você pode fazer isso com o argumento <code>col_types</code>, que aceita uma lista nomeada onde os nomes correspondem aos nomes das colunas no arquivo CSV:</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="va">simple_csv</span>, </span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: One or more parsing issues, call `problems()` on your data frame for</span></span>
<span><span class="co">#&gt; details, e.g.:</span></span>
<span><span class="co">#&gt;   dat &lt;- vroom(...)</span></span>
<span><span class="co">#&gt;   problems(dat)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Agora <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> relata que houve um problema e nos diz que podemos descobrir mais com <code><a href="https://readr.tidyverse.org/reference/problems.html">problems()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/problems.html">problems</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span><span class="co">#&gt;     row   col expected actual file                                           </span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;                                          </span></span>
<span><span class="co">#&gt; 1     3     1 a double .      /private/var/folders/st/0346cszj61928zc133bfr8…</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isso nos diz que houve um problema na linha 3, coluna 1, onde o readr esperava um número real, mas obteve um <code>.</code>. Isso sugere que este conjunto de dados usa <code>.</code> para valores ausentes. Então, definimos <code>na = "."</code>, a adivinhação automática tem sucesso, nos dando a coluna numérica que queremos:</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">simple_csv</span>, na <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 1</span></span>
<span><span class="co">#&gt;       x</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1    10</span></span>
<span><span class="co">#&gt; 2    NA</span></span>
<span><span class="co">#&gt; 3    20</span></span>
<span><span class="co">#&gt; 4    30</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="tipos-de-colunas" class="level3" data-number="7.3.3"><h3 data-number="7.3.3" class="anchored" data-anchor-id="tipos-de-colunas">
<span class="header-section-number">7.3.3</span> Tipos de colunas</h3>
<p>O pacote readr fornece um total de nove tipos de coluna para você usar:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_logical()</a></code> e <code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double()</a></code> leem lógicos e números reais. É relativamente raro serem necessários (exceto como acima), já que o readr geralmente os adivinhará para você.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_integer()</a></code> lê números inteiros (<em>integer</em>). Raramente distinguimos os números inteiros (<em>integer</em>) e reais (<em>doubles</em>) neste livro porque eles são funcionalmente equivalentes, mas ler números inteiros explicitamente pode ocasionalmente ser útil porque ocupam metade da memória dos números reais.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character()</a></code> lê <em>strings</em>. Isso pode ser útil para especificar explicitamente quando você tem uma coluna que é um identificador numérico, ou seja, longas séries de dígitos que identificam um objeto, mas onde não faz sentido aplicar operações matemáticas. Exemplos incluem números de telefone, números de seguro social, números de cartão de crédito, etc.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor()</a></code>, <code><a href="https://readr.tidyverse.org/reference/parse_datetime.html">col_date()</a></code> e <code><a href="https://readr.tidyverse.org/reference/parse_datetime.html">col_datetime()</a></code> criam fatores, datas e data-horas, respectivamente; você aprenderá mais sobre esses tipos de dados quando chegarmos a eles em <a href="factors.html" class="quarto-xref"><span>Capítulo 16</span></a> e <a href="datetimes.html" class="quarto-xref"><span>Capítulo 17</span></a>.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number()</a></code> é um analisador numérico permissivo que ignorará componentes não numéricos, e é particularmente útil para moedas. Você aprenderá mais sobre ele em <a href="numbers.html" class="quarto-xref"><span>Capítulo 13</span></a>.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/col_skip.html">col_skip()</a></code> pula uma coluna para que ela não seja incluída no resultado, o que pode ser útil para acelerar a leitura dos dados se você tiver um arquivo CSV grande e quiser usar apenas algumas das colunas.</li>
</ul>
<p>Também é possível substituir a coluna padrão trocando de <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> para <code><a href="https://readr.tidyverse.org/reference/cols.html">cols()</a></code> e especificando <code>.default</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">outro_csv</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">x,y,z</span></span>
<span><span class="st">1,2,3"</span></span>
<span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="va">outro_csv</span>, </span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   x     y     z    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 1     2     3</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Outra função auxiliar útil é <code><a href="https://readr.tidyverse.org/reference/cols.html">cols_only()</a></code>, que lerá apenas as colunas que você especificar:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="va">outro_csv</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols_only</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   x    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="sec-readr-directory" class="level2" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="sec-readr-directory">
<span class="header-section-number">7.4</span> Importando dados de múltiplos arquivos</h2>
<p>Às vezes seus dados estão divididos em vários arquivos em vez de estarem contidos em um único arquivo. Por exemplo, você pode ter dados de vendas para vários meses, com os dados de cada mês em um arquivo separado: <code>01-vendas.csv</code> para janeiro, <code>02-vendas.csv</code> para fevereiro e <code>03-vendas.csv</code> para março.</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">arquivos_vendas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"data/01-vendas.csv"</span>, <span class="st">"data/02-vendas.csv"</span>, <span class="st">"data/03-vendas.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">arquivos_vendas</span>, id <span class="op">=</span> <span class="st">"arquivo"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 19 × 6</span></span>
<span><span class="co">#&gt;   arquivo            mes       ano marca  item     n</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 data/01-vendas.csv Janeiro  2019     1  1234     3</span></span>
<span><span class="co">#&gt; 2 data/01-vendas.csv Janeiro  2019     1  8721     9</span></span>
<span><span class="co">#&gt; 3 data/01-vendas.csv Janeiro  2019     1  1822     2</span></span>
<span><span class="co">#&gt; 4 data/01-vendas.csv Janeiro  2019     2  3333     1</span></span>
<span><span class="co">#&gt; 5 data/01-vendas.csv Janeiro  2019     2  2156     9</span></span>
<span><span class="co">#&gt; 6 data/01-vendas.csv Janeiro  2019     2  3987     6</span></span>
<span><span class="co">#&gt; # ℹ 13 more rows</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mais uma vez, o código acima funcionará apenas se você tiver os arquivos CSV em uma pasta chamada <code>data</code> no seu projeto. Você pode baixar esses arquivos de <a href="https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/01-vendas.csv" class="uri">https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/01-vendas.csv</a>, <a href="https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/02-vendas.csv" class="uri">https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/02-vendas.csv</a> e <a href="https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/03-vendas.csv" class="uri">https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/03-vendas.csv</a> ou você pode lê-los diretamente com:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">arquivos_vendas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/01-vendas.csv"</span>,</span>
<span>  <span class="st">"https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/02-vendas.csv"</span>,</span>
<span>  <span class="st">"https://raw.githubusercontent.com/cienciadedatos/pt-r4ds/traducao-pt-2ed/data/03-vendas.csv"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">arquivos_vendas</span>, id <span class="op">=</span> <span class="st">"arquivo"</span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O argumento <code>id</code> adiciona uma nova coluna chamada <code>arquivo</code> ao data frame resultante que identifica o arquivo de onde os dados vêm. Isso é especialmente útil nas circunstâncias em que os arquivos que você está lendo não têm uma coluna de identificação que possa ajudá-lo a rastrear as observações até suas fontes originais.</p>
<p>Se você tiver muitos arquivos que deseja ler, pode ser complicado escrever seus nomes como uma lista. Em vez disso, você pode usar a função <code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> para encontrar os arquivos para você, identificando um padrão nos nomes dos arquivos. Você aprenderá mais sobre esses padrões em <a href="regexps.html" class="quarto-xref"><span>Capítulo 15</span></a>.</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">arquivos_vendas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="st">"data"</span>, pattern <span class="op">=</span> <span class="st">"vendas\\.csv$"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">arquivos_vendas</span></span>
<span><span class="co">#&gt; [1] "data/01-vendas.csv" "data/02-vendas.csv" "data/03-vendas.csv"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sec-writing-to-a-file" class="level2" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="sec-writing-to-a-file">
<span class="header-section-number">7.5</span> Exportando para um arquivo</h2>
<p>O pacote readr também vem com duas funções úteis para escrever dados de volta para o disco: <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code> e <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv()</a></code>. Os argumentos mais importantes para essas funções são <code>x</code> (o data frame a ser salvo) e <code>file</code> (o local para salvá-lo). Você também pode especificar como os valores ausentes são escritos com <code>na</code>, e se você deseja acrescentar as linhas em um arquivo existente, utilizando o argumento <code>append</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">estudantes</span>, <span class="st">"estudantes.csv"</span><span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Agora, vamos ler esse arquivo CSV novamente. Observe que as informações de tipo de variável que você acabou de configurar são perdidas quando você salva em CSV porque você está começando de novo com a leitura de um arquivo de texto simples:</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">estudantes</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço               4</span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço               5</span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al…     7</span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço              NA</span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al…     5</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço               6</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">estudantes</span>, <span class="st">"estudantes-2.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"estudantes-2.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;               &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço               4</span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço               5</span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al…     7</span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço              NA</span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al…     5</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço               6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isso faz arquivos CSVs um pouco não confiáveis para armazenar resultados intermediários — você precisa recriar a especificação das colunas toda vez que carrega os dados. Existem duas formas principais:</p>
<ol type="1">
<li>
<p><code><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds()</a></code> e <code><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds()</a></code> são <em>wrappers</em> uniformes<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> em torno das funções base <code><a href="https://rdrr.io/r/base/readRDS.html">readRDS()</a></code> e <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code>. Eles armazenam dados no formato binário personalizado do R chamado RDS. Isso significa que quando você recarrega o objeto, você está carregando <em>exatamente o mesmo</em> objeto R que você armazenou.</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span><span class="op">(</span><span class="va">estudantes</span>, <span class="st">"estudantes.rds"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds</a></span><span class="op">(</span><span class="st">"estudantes.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id_estudante nome_completo     comida_favorita    plano_alimentar     idade</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1            1 Pedro Cardoso     Iogurte de morango Só almoço               4</span></span>
<span><span class="co">#&gt; 2            2 Rafaela Lorenzoni Batata frita       Só almoço               5</span></span>
<span><span class="co">#&gt; 3            3 Otávio Barros     &lt;NA&gt;               Café da manhã e al…     7</span></span>
<span><span class="co">#&gt; 4            4 Fernanda Melo     Brócolis           Só almoço              NA</span></span>
<span><span class="co">#&gt; 5            5 Leopoldo Souza    Pizza              Café da manhã e al…     5</span></span>
<span><span class="co">#&gt; 6            6 Pérola Silva      Sorvete            Só almoço               6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li>
<p>O pacote arrow te permite importar e exportar arquivos parquet, um formato de arquivo binário rápido que pode ser compartilhado entre diferentes linguagens de programação. Voltaremos ao arrow com mais detalhes em <a href="arrow.html" class="quarto-xref"><span>Capítulo 22</span></a>.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/apache/arrow/">arrow</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://arrow.apache.org/docs/r/reference/write_parquet.html">write_parquet</a></span><span class="op">(</span><span class="va">estudantes</span>, <span class="st">"estudantes.parquet"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html">read_parquet</a></span><span class="op">(</span><span class="st">"estudantes.parquet"</span><span class="op">)</span></span>
<span><span class="co"># A tibble: 6 × 5</span></span>
<span><span class="co">#   id_estudante nome_completo     comida_favorita</span></span>
<span><span class="co">#          &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;          </span></span>
<span><span class="co"># 1            1 Pedro Cardoso     Iogurte de mor…</span></span>
<span><span class="co"># 2            2 Rafaela Lorenzoni Batata frita   </span></span>
<span><span class="co"># 3            3 Otávio Barros     &lt;NA&gt;           </span></span>
<span><span class="co"># 4            4 Fernanda Melo     Brócolis       </span></span>
<span><span class="co"># 5            5 Leopoldo Souza    Pizza          </span></span>
<span><span class="co"># 6            6 Pérola Silva      Sorvete        </span></span>
<span><span class="co"># # ℹ 2 more variables: plano_alimentar &lt;fct&gt;,</span></span>
<span><span class="co"># #   idade &lt;dbl&gt;</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ol>
<p>Parquet tende a ser muito mais rápido que RDS e é utilizável fora do R, mas requer o pacote arrow.</p>
</section><section id="entrada-de-dados" class="level2" data-number="7.6"><h2 data-number="7.6" class="anchored" data-anchor-id="entrada-de-dados">
<span class="header-section-number">7.6</span> Entrada de dados</h2>
<p>Às vezes você precisará montar um tibble “à mão” fazendo um pouco de entrada de dados no seu script R. Existem duas funções úteis para ajudá-lo a fazer isso que diferem se você organiza o tibble por colunas ou por linhas. <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> funciona por coluna:</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h"</span>, <span class="st">"m"</span>, <span class="st">"g"</span><span class="op">)</span>,</span>
<span>  z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.08</span>, <span class="fl">0.83</span>, <span class="fl">0.60</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;       x y         z</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1 h      0.08</span></span>
<span><span class="co">#&gt; 2     2 m      0.83</span></span>
<span><span class="co">#&gt; 3     5 g      0.6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Laying out the data by column can make it hard to see how the rows are related, so an alternative is <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code>, short for <strong>tr</strong>ansposed t<strong>ibble</strong>, which lets you lay out your data row by row. <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code> é customizado para entrada de dados no código: os cabeçalhos das colunas começam com <code>~</code> e as entradas são separadas por vírgulas. Isso torna possível dispor pequenas quantidades de dados em uma forma fácil de ler:</p>
<p>Inserir os dados por coluna pode dificultar a visualização de como as linhas estão relacionadas, então uma alternativa é <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code>, abreviação de <em><strong>tr</strong>ansposed t<strong>ibble</strong></em> (tibble transposta), que permite organizar seus dados linha por linha.</p>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">x</span>, <span class="op">~</span><span class="va">y</span>, <span class="op">~</span><span class="va">z</span>,</span>
<span>  <span class="fl">1</span>, <span class="st">"h"</span>, <span class="fl">0.08</span>,</span>
<span>  <span class="fl">2</span>, <span class="st">"m"</span>, <span class="fl">0.83</span>,</span>
<span>  <span class="fl">5</span>, <span class="st">"g"</span>, <span class="fl">0.60</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;       x y         z</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1 h      0.08</span></span>
<span><span class="co">#&gt; 2     2 m      0.83</span></span>
<span><span class="co">#&gt; 3     5 g      0.6</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="resumo" class="level2" data-number="7.7"><h2 data-number="7.7" class="anchored" data-anchor-id="resumo">
<span class="header-section-number">7.7</span> Resumo</h2>
<p>Neste capítulo, você aprendeu como carregar arquivos CSV com <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> e como inserir seus próprios dados com <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> e <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code>. Você aprendeu como arquivos CSV funcionam, alguns dos problemas que você pode encontrar e como superá-los. Voltaremos à importação de dados algumas vezes neste livro: <a href="spreadsheets.html" class="quarto-xref"><span>Capítulo 20</span></a> do Excel e do Google Planilhas, <a href="databases.html" class="quarto-xref"><span>Capítulo 21</span></a> mostrará para você como carregar dados de bancos de dados, <a href="arrow.html" class="quarto-xref"><span>Capítulo 22</span></a> de arquivos parquet, <a href="rectangling.html" class="quarto-xref"><span>Capítulo 23</span></a> de JSON e <a href="webscraping.html" class="quarto-xref"><span>Capítulo 24</span></a> de sites.</p>
<p>Estamos quase no final desta seção do livro, mas há um último tópico importante a ser coberto: como obter ajuda. Então, no próximo capítulo, você aprenderá alguns bons lugares para procurar ajuda, como criar um exemplo reprodutível (<em>reprex</em>)<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> para maximizar suas chances de obter boa ajuda e alguns conselhos gerais sobre como acompanhar o mundo do R.</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>No Brasil, é mais comum o tipo CSV2, que utiliza ponto-e-vírgula como separador e é, portanto, compatível com o uso da vírgula como separador decimal. (N. dos T.)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>O pacote <a href="http://sfirke.github.io/janitor/">janitor</a> não faz parte do tidyverse, mas oferece funções úteis para limpeza de dados e funciona bem em <em>pipelines</em> de dados que usam <code>|&gt;</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Você pode substituir o padrão de 1.000 com o argumento <code>guess_max</code>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>No contexto de <em>wrappers</em>, funções ou métodos construídos como uma camada de abstração mais simples e consistente sobre outras funções ou métodos existentes, uniforme significa que o <em>wrapper</em> oferece uma interface padronizada em relação à outras funções e métodos de operações similares, oferecendo uma interação mais previsível ao usuário. (N. dos T.)<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Reprex é o acrônimo para <em><strong>Repr</strong>oducible <strong>Ex</strong>ample</em> (exemplo reprodutível). (N. dos T.)<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./workflow-scripts.html" class="pagination-link  aria-label=" fluxo="" de="" trabalho:="" scripts="" e="" projetos="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: scripts e projetos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./workflow-help.html" class="pagination-link" aria-label="<span class='chapter-number'>8</span>&nbsp; <span class='chapter-title'>✅ Fluxo de trabalho: obtendo ajuda</span>">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: obtendo ajuda</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>R para Ciência de Dados (2ª edição) foi escrito por Hadley Wickham, Mine Çetinkaya-Rundel, e Garrett Grolemund.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/cienciadedatos/pt-r4ds/edit/main/data-import.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/cienciadedatos/pt-r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Este livro foi contruído com <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>