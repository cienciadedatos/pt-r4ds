<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Hadley Wickham, Mine Çetinkaya-Rundel, e Garrett Grolemund">
<title>R para Ciência de Dados (2ª edição) - 28&nbsp; ✅ Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./quarto-formats.html" rel="next">
<link href="./communicate.html" rel="prev">
<link href="./cover.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script><script defer="" data-domain="r4ds.hadley.nz" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./communicate.html">✅ Comunicar</a></li><li class="breadcrumb-item"><a href="./quarto.html"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">✅ Quarto</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R para Ciência de Dados (2ª edição)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cienciadedatos/pt-r4ds/" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo de leitor">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Boas-vindas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface-2e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Prefácio da segunda edição</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Introdução</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Visão geral</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">✅ Visualização de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">✅ Fluxo de Trabalho: básico</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">✅ Transformação de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: estilo de código</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">✅ Organização de dados (<em>data tidying</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: scripts e projetos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">✅ Importação de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">✅ Fluxo de trabalho: obtendo ajuda</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Visualizar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">✅ Camadas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exploratory data analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Communication</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Transformar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logicals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">✅ Vetores lógicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">✅ Números</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regexps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Regular expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">✅ Fatores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dates and times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missing-values.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">✅ Valores faltantes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Joins</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Importar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">✅ Planilhas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">✅ Bancos de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./arrow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">✅ Arrow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rectangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Hierarchical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">✅ Raspagem de dados (<em>Web scraping</em>)</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Programar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">✅ Funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Iteration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./base-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">✅ Um guia para o R base</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">✅ Comunicar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">✅ Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">✅ Formatos para Quarto</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li>
<a href="#introdu%C3%A7%C3%A3o" id="toc-introdução" class="nav-link active" data-scroll-target="#introdu%C3%A7%C3%A3o"><span class="header-section-number">28.1</span> Introdução</a>
  <ul class="collapse">
<li><a href="#pr%C3%A9-requisitos" id="toc-pré-requisitos" class="nav-link" data-scroll-target="#pr%C3%A9-requisitos"><span class="header-section-number">28.1.1</span> Pré-requisitos</a></li>
  </ul>
</li>
  <li>
<a href="#b%C3%A1sico-de-quarto" id="toc-básico-de-quarto" class="nav-link" data-scroll-target="#b%C3%A1sico-de-quarto"><span class="header-section-number">28.2</span> Básico de Quarto</a>
  <ul class="collapse">
<li><a href="#exerc%C3%ADcios" id="toc-exercícios" class="nav-link" data-scroll-target="#exerc%C3%ADcios"><span class="header-section-number">28.2.1</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#editor-visual" id="toc-editor-visual" class="nav-link" data-scroll-target="#editor-visual"><span class="header-section-number">28.3</span> Editor Visual</a>
  <ul class="collapse">
<li><a href="#exerc%C3%ADcios-1" id="toc-exercícios-1" class="nav-link" data-scroll-target="#exerc%C3%ADcios-1"><span class="header-section-number">28.3.1</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#sec-source-editor" id="toc-sec-source-editor" class="nav-link" data-scroll-target="#sec-source-editor"><span class="header-section-number">28.4</span> Editor Source</a>
  <ul class="collapse">
<li><a href="#exerc%C3%ADcios-2" id="toc-exercícios-2" class="nav-link" data-scroll-target="#exerc%C3%ADcios-2"><span class="header-section-number">28.4.1</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#blocos-de-c%C3%B3digo" id="toc-blocos-de-código" class="nav-link" data-scroll-target="#blocos-de-c%C3%B3digo"><span class="header-section-number">28.5</span> Blocos de Código</a>
  <ul class="collapse">
<li><a href="#r%C3%B3tulo-do-bloco-de-c%C3%B3digo" id="toc-rótulo-do-bloco-de-código" class="nav-link" data-scroll-target="#r%C3%B3tulo-do-bloco-de-c%C3%B3digo"><span class="header-section-number">28.5.1</span> Rótulo do bloco de código</a></li>
  <li><a href="#op%C3%A7%C3%B5es-de-bloco-de-c%C3%B3digo-chunk-options" id="toc-opções-de-bloco-de-código-chunk-options" class="nav-link" data-scroll-target="#op%C3%A7%C3%B5es-de-bloco-de-c%C3%B3digo-chunk-options"><span class="header-section-number">28.5.2</span> Opções de bloco de código (<em>chunk options</em>)</a></li>
  <li><a href="#op%C3%A7%C3%B5es-globais" id="toc-opções-globais" class="nav-link" data-scroll-target="#op%C3%A7%C3%B5es-globais"><span class="header-section-number">28.5.3</span> Opções Globais</a></li>
  <li><a href="#c%C3%B3digo-em-linha" id="toc-código-em-linha" class="nav-link" data-scroll-target="#c%C3%B3digo-em-linha"><span class="header-section-number">28.5.4</span> Código em linha</a></li>
  <li><a href="#exerc%C3%ADcios-3" id="toc-exercícios-3" class="nav-link" data-scroll-target="#exerc%C3%ADcios-3"><span class="header-section-number">28.5.5</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#sec-figures" id="toc-sec-figures" class="nav-link" data-scroll-target="#sec-figures"><span class="header-section-number">28.6</span> Figuras</a>
  <ul class="collapse">
<li><a href="#tamanho-de-figura" id="toc-tamanho-de-figura" class="nav-link" data-scroll-target="#tamanho-de-figura"><span class="header-section-number">28.6.1</span> Tamanho de figura</a></li>
  <li><a href="#outras-op%C3%A7%C3%B5es-importantes" id="toc-outras-opções-importantes" class="nav-link" data-scroll-target="#outras-op%C3%A7%C3%B5es-importantes"><span class="header-section-number">28.6.2</span> Outras opções importantes</a></li>
  <li><a href="#exerc%C3%ADcios-4" id="toc-exercícios-4" class="nav-link" data-scroll-target="#exerc%C3%ADcios-4"><span class="header-section-number">28.6.3</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#tabelas" id="toc-tabelas" class="nav-link" data-scroll-target="#tabelas"><span class="header-section-number">28.7</span> Tabelas</a>
  <ul class="collapse">
<li><a href="#exerc%C3%ADcios-5" id="toc-exercícios-5" class="nav-link" data-scroll-target="#exerc%C3%ADcios-5"><span class="header-section-number">28.7.1</span> Exercícios</a></li>
  </ul>
</li>
  <li>
<a href="#sec-caching" id="toc-sec-caching" class="nav-link" data-scroll-target="#sec-caching"><span class="header-section-number">28.8</span> Salvando em cache</a>
  <ul class="collapse">
<li><a href="#exerc%C3%ADcios-6" id="toc-exercícios-6" class="nav-link" data-scroll-target="#exerc%C3%ADcios-6"><span class="header-section-number">28.8.1</span> Exercícios</a></li>
  </ul>
</li>
  <li><a href="#resolu%C3%A7%C3%A3o-de-problemas" id="toc-resolução-de-problemas" class="nav-link" data-scroll-target="#resolu%C3%A7%C3%A3o-de-problemas"><span class="header-section-number">28.9</span> Resolução de problemas</a></li>
  <li>
<a href="#cabe%C3%A7alho-yaml" id="toc-cabeçalho-yaml" class="nav-link" data-scroll-target="#cabe%C3%A7alho-yaml"><span class="header-section-number">28.10</span> Cabeçalho YAML</a>
  <ul class="collapse">
<li><a href="#documentos-autocontidos" id="toc-documentos-autocontidos" class="nav-link" data-scroll-target="#documentos-autocontidos"><span class="header-section-number">28.10.1</span> Documentos Autocontidos</a></li>
  <li><a href="#par%C3%A2metros" id="toc-parâmetros" class="nav-link" data-scroll-target="#par%C3%A2metros"><span class="header-section-number">28.10.2</span> Parâmetros</a></li>
  <li><a href="#bibliografias-e-cita%C3%A7%C3%B5es" id="toc-bibliografias-e-citações" class="nav-link" data-scroll-target="#bibliografias-e-cita%C3%A7%C3%B5es"><span class="header-section-number">28.10.3</span> Bibliografias e citações</a></li>
  </ul>
</li>
  <li><a href="#fluxo-de-trabalho" id="toc-fluxo-de-trabalho" class="nav-link" data-scroll-target="#fluxo-de-trabalho"><span class="header-section-number">28.11</span> Fluxo de trabalho</a></li>
  <li><a href="#resumo" id="toc-resumo" class="nav-link" data-scroll-target="#resumo"><span class="header-section-number">28.12</span> Resumo</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/cienciadedatos/pt-r4ds/edit/main/quarto.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/cienciadedatos/pt-r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./communicate.html">✅ Comunicar</a></li><li class="breadcrumb-item"><a href="./quarto.html"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">✅ Quarto</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-quarto" class="quarto-section-identifier"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">✅ Quarto</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="introdução" class="level2" data-number="28.1"><h2 data-number="28.1" class="anchored" data-anchor-id="introdução">
<span class="header-section-number">28.1</span> Introdução</h2>
<p>O Quarto fornece uma estrutura (<em>framework</em>) unificada para autoria em ciência de dados, combinando seu código, seus resultados e seu texto. Documentos Quarto são plenamente reprodutíveis e suportam muitos formatos de saída como PDF, arquivos Word, apresentações e mais.</p>
<p>Arquivos Quarto foram projetados para serem usados de três maneiras:</p>
<ol type="1">
<li><p>Para se comunicar com pessoas tomadoras de decisão, que querem focar nas conclusões e não no código por trás da análise.</p></li>
<li><p>Para colaborar com outras pessoas cientistas de dados (incluindo você no futuro!) que estejam interessadas tanto em suas conclusões quanto em como você as alcançou (isto é, o código).</p></li>
<li><p>Como um ambiente em que se <em>faz</em> ciência de dados, como um caderno (<em>notebook</em>) de laboratório moderno em que se pode capturar não apenas o que você fez, como também o que você estava pensando.</p></li>
</ol>
<p>Quarto é uma feerramenta de linha de comando, não é um pacote do R. Isso significa que ajuda, via de regra, não está disponível via <code>?</code>. Em vez disso, enquanto você trabalhar neste capítulo e usar o Quarto no futuro, você deve procurar a <a href="https://quarto.org">documentação para Quarto</a>.</p>
<p>Se você for uma pessoa que usa R Markdown, você deve estar pensando “Quarto parece muito com R Markdown”. Isso não está errado! Quarto une a funcionalidade de muitos pacotes do ecosistema do R Markdown (rmarkdown, bookdown, distill, xaringan, etc.) em um sistema único e consistente, mas também extende o ecosistema com apoio nativo para múltiplas linguagens de programação como Python e Julia, além do próprio R. De certa forma, o Quarto reflete tudo que foi aprendido na expansão e no suporte ao ecossistema do R Markdown em uma década.</p>
<section id="pré-requisitos" class="level3" data-number="28.1.1"><h3 data-number="28.1.1" class="anchored" data-anchor-id="pré-requisitos">
<span class="header-section-number">28.1.1</span> Pré-requisitos</h3>
<p>Você precisa da interface de linha de comando do Quarto (Quarto CLI – <em>command line interface</em>), mas não é necessário instalá-la ou carregá-la explicitamente. Seu RStudio o fará automaticamente quando for necessário.</p>
</section></section><section id="básico-de-quarto" class="level2" data-number="28.2"><h2 data-number="28.2" class="anchored" data-anchor-id="básico-de-quarto">
<span class="header-section-number">28.2</span> Básico de Quarto</h2>
<p>Isso é um arquivo Quarto – um arquivo de texto simples que possui a extensão <code>.qmd</code>:</p>
<div class="cell">
<pre><code>---
title: "Tamanhos de diamante"
date: 2022-09-12
format: html
---

```{r}
#| label: setup
#| include: false

library(tidyverse)
library(dados)

menores &lt;- diamante |&gt; 
  filter(quilate &lt;= 2.5)
```

Temos dados sobre `r nrow(diamante)` diamantes. 
Apenas `r nrow(diamante) - nrow(menores)` são maiores que 2.5 quilates. 
A distribuição dos demais é exibida a seguir:

```{r}
#| label: grafico-diamantes-menores
#| echo: false

menores |&gt; 
  ggplot(aes(x = quilate)) + 
  geom_freqpoly(binwidth = 0.01)
```</code></pre>
</div>
<p>O arquivo contém três tipos importantes de conteúdo:</p>
<ol type="1">
<li>Um <strong>cabeçalho YAML</strong> (opcional) envolto por <code>---</code>.</li>
<li>
<strong>Blocos</strong> (ou <em>chunks</em>) de código R envoltos por <code>```</code>.</li>
<li>Texto misturado com formatação simples de texto como <code># título/subtítulo</code> e <code>_itálico_</code>.</li>
</ol>
<p><a href="#fig-diamond-sizes-notebook" class="quarto-xref">Figura&nbsp;<span>28.1</span></a> mostra um documento <code>.qmd</code> no RStudio com interface de <em>notebook</em>, no qual código e saída são intercalados. Você pode executar cada bloco de código clicando no ícone Executar – <em>Run</em> (triângulo verde que parece com o botão de play no canto superior direito do bloco de código), ou pressionando Cmd/Ctrl + Shift + Enter. O RStudio executará o código e mostrará os resultados juntamente com o código.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-diamond-sizes-notebook" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Janela do RStudio com um documento Quarto intitulado &quot;diamond-sizes.qmd&quot; à esquerda e um painel de Viewer em branco à direita. O documento Quarto tem um bloco de código que cria um gráfico de frequências dos diamantes que pesam menos que 2.5 quilates. Esse gráfico mostra que a frequência diminui à medida que o peso aumenta.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-diamond-sizes-notebook-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="quarto/diamond-sizes-notebook.png" class="img-fluid figure-img" style="width:90.0%" alt="Janela do RStudio com um documento Quarto intitulado &quot;diamond-sizes.qmd&quot; à esquerda e um painel de Viewer em branco à direita. O documento Quarto tem um bloco de código que cria um gráfico de frequências dos diamantes que pesam menos que 2.5 quilates. Esse gráfico mostra que a frequência diminui à medida que o peso aumenta.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diamond-sizes-notebook-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;28.1: Um documento Quarto no RStudio. Código e saída intercalados no documento, com a saída do gráfico aparecendo logo abaixo do código.
</figcaption></figure>
</div>
</div>
</div>
<p>Se você não gosta de ver seus gráficos e saída dos códigos no documento e prefere usar os painéis do console e gráfico (aba <em>plot</em>), é possível clicar no ícone de engrenagem próximo ao botão “<em>Render</em>” e selecionar “<em>Chunk Output in Console</em>” (ou seja, mostrar resultados do chunk no console), conforme mostrado em <a href="#fig-diamond-sizes-console-output" class="quarto-xref">Figura&nbsp;<span>28.2</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-diamond-sizes-console-output" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Janela do RStudio com um documento Quarto de nome &quot;diamond-sizes.qmd&quot; à esquerda e o painel Plot no canto inferior direito. O documento Quarto tem um bloco de código que cria um gráfico de frequências de diamantes que pesam menos que 2.5 quilates. O gráfico é exibido no painel Plot e mostra que a frequência diminui quando o peso aumenta. A opção do RStudio de mostrar o Chunk Output no Console também é grifada.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-diamond-sizes-console-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="quarto/diamond-sizes-console-output.png" class="img-fluid figure-img" style="width:90.0%" alt="Janela do RStudio com um documento Quarto de nome &quot;diamond-sizes.qmd&quot; à esquerda e o painel Plot no canto inferior direito. O documento Quarto tem um bloco de código que cria um gráfico de frequências de diamantes que pesam menos que 2.5 quilates. O gráfico é exibido no painel Plot e mostra que a frequência diminui quando o peso aumenta. A opção do RStudio de mostrar o Chunk Output no Console também é grifada.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diamond-sizes-console-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;28.2: Um documento Quarto no RStudio com a saída de gráfico no painel Plots.
</figcaption></figure>
</div>
</div>
</div>
<p>Para produzir um relatório completo contendo todo o texto, código e resultados, clique em “Render” or pressione Cmd/Ctrl + Shift + K. Você também pode fazer isso programaticamente, em linha de código, com <code>quarto::quarto_render("diamond-sizes.qmd")</code>. Isso exibirá o relatório no painel de visualização, como exibido em <a href="#fig-diamond-sizes-report" class="quarto-xref">Figura&nbsp;<span>28.3</span></a>, e criará um arquivo HTML.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-diamond-sizes-report" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Janela do RStudio com um documento Quarto chamado &quot;diamond-sizes.qmd&quot; à esquerda e o painel Plot no canto inferior direito. O documento renderizado não mostra o código, mas o código é visivel no documento fonte.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-diamond-sizes-report-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="quarto/diamond-sizes-report.png" class="img-fluid figure-img" style="width:90.0%" alt="Janela do RStudio com um documento Quarto chamado &quot;diamond-sizes.qmd&quot; à esquerda e o painel Plot no canto inferior direito. O documento renderizado não mostra o código, mas o código é visivel no documento fonte.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diamond-sizes-report-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;28.3: Um documento Quarto no RStudio com o documento renderizado no painel Viewer.
</figcaption></figure>
</div>
</div>
</div>
<p>Quando se gera ou renderiza o documento, Quarto envia o arquivo <code>.qmd</code> para o <strong>knitr</strong>, <a href="https://yihui.org/knitr/" class="uri">https://yihui.org/knitr/</a>, que executa todos os blocos de código e cria um novo arquivo markdown (<code>.md</code>) que inclui o código e seus resultados. O arquivo markdown gerado pelo knitr é então processado pelo <strong>pandoc</strong>, <a href="https://pandoc.org/" class="uri">https://pandoc.org</a>, que é responsável por criar a versão final do arquivo. Esse processo é ilustrado em <a href="#fig-quarto-flow" class="quarto-xref">Figura&nbsp;<span>28.4</span></a>. A vantagem desse fluxo de trabalho em duas etapas é que é possível criar uma ampla variedade de formatos de arquivo, como você verá em <a href="quarto-formats.html" class="quarto-xref"><span>Capítulo 29</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-quarto-flow" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Diagrama de fluxo de trabalho começando com um arquivo qmd, depois knitr, md, pandoc e finalmente PDF, MS Word ou HTML. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-quarto-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/quarto-flow.png" class="img-fluid figure-img" style="width:75.0%" alt="Diagrama de fluxo de trabalho começando com um arquivo qmd, depois knitr, md, pandoc e finalmente PDF, MS Word ou HTML. ">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-quarto-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;28.4: Diagrama do fluxo de trabalho Quarto de qmd a knitr, md, pandoc para saída nos formatos PDF, MS Word ou HTML.
</figcaption></figure>
</div>
</div>
</div>
<p>Para iniciar seu próprio arquivo <code>.qmd</code>, selecione <em>File &gt; New File &gt; Quarto Document…</em> na barra de menu. O RStudio abrirá uma janela em que você poderá preencher informações para preencher seu arquivo com conteúdos úteis que lembra como os principais recursos do Quarto funcionam.</p>
<p>As seções a seguir aprofundam os três componentes de um documento Quarto em mais detalhes: o texto em markdown, os blocos de código e o cabeçalho YAML.</p>
<section id="exercícios" class="level3" data-number="28.2.1"><h3 data-number="28.2.1" class="anchored" data-anchor-id="exercícios">
<span class="header-section-number">28.2.1</span> Exercícios</h3>
<ol type="1">
<li><p>Crie um novo documento Quarto usando <em>File &gt; New File &gt; Quarto Document</em>. Leia as instruções. Pratique a execução dos blocos de código individualmente. Depois, renderize o documento clicando no botão designado e depois usando o atalho do teclado. Verifique se consegue alterar o código, rodá-lo novamente e ver o novo documento modificado.</p></li>
<li><p>Crie um novo documento Quarto para cada um dos três formatos disponibilizados: HTML, PDF e Word. Renderize cada um dos três documentos. Qual é a diferença entre as saídas (<em>outputs</em>)? Qual é a diferença entre as entradas (<em>inputs</em>)? (É possível que seja necessário instalar o LaTeX para construir o arquivo PDF — O RStudio avisará se isso for necessário.)</p></li>
</ol></section></section><section id="editor-visual" class="level2" data-number="28.3"><h2 data-number="28.3" class="anchored" data-anchor-id="editor-visual">
<span class="header-section-number">28.3</span> Editor Visual</h2>
<p>O editor Visual no RStudio utiliza uma interface <a href="https://en.wikipedia.org/wiki/WYSIWYM">WYSIWYM</a> para autoria de documentos Quarto. Por trás das cortinas, os textos em documentos Quarto (arquivos <code>.qmd</code>) são escritos em Markdown, um conjunto leve de convenções para formatação de arquivos de texto simples. Na verdade, o Quarto usa o markdown do Pandoc (uma versão um pouco extendida de Markdown que é interpretável pelo Quarto), incluindo tabelas, citações, referências cruzadas, notas de rodapé, divs/spans, listas de definição, atributos, HTML/TeX crus, entre outros, assim como suporta execução de células de código e a visualização de seus resultados em linha. Enquanto Markdown é desenhado para ser simples de ler e de escrever, como você verá em <a href="#sec-source-editor" class="quarto-xref"><span>Seção 28.4</span></a>, ainda é necessário aprender uma nova sintaxe. Assim, se documentos computacionais como arquivos <code>.qmd</code> são novos para você, mas você tem experiência com Google Docs ou MS Word, o jeito mais fácil de começar a usar Quarto no RStudio é pelo editor visual.</p>
<p>No editor visual, você pode tanto usar botões na barra de menu para inserir imagens, tabelas, referências cruzadas, etc. quanto usar o atalho geral <kbd>⌘ /</kbd> para inserir qualquer coisa. Se você estiver no começo de uma linha (como ilustrado em <a href="#fig-visual-editor" class="quarto-xref">Figura&nbsp;<span>28.5</span></a>), você pode apenas digitar <kbd>/</kbd> para usar o atalho.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-visual-editor" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Um documento Quarto exibindo diversos recursos do editor visual como formatação de texto (itálico, negrito, sublinhado, caixa alta pequena, código, superescrito e subscrito), títulos de nível um a três, listas enumeradas e não enumeradas, links, frases com links e imagens (assim como uma janela pop-up para personalização de tamanho de imagem, inserção de legenda, texto alternativo, etc.), tabelas com uma linha de cabeçalho e a ferramenta de inserir qualquer coisa com opções de inserir um bloco de código R, um bloco de código Python, um div, uma lista não enumerada, uma lista enumerada ou um título de primeiro nível (são algumas das primeiras opções da ferramenta).">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-visual-editor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="quarto/quarto-visual-editor.png" class="img-fluid figure-img" style="width:75.0%" alt="Um documento Quarto exibindo diversos recursos do editor visual como formatação de texto (itálico, negrito, sublinhado, caixa alta pequena, código, superescrito e subscrito), títulos de nível um a três, listas enumeradas e não enumeradas, links, frases com links e imagens (assim como uma janela pop-up para personalização de tamanho de imagem, inserção de legenda, texto alternativo, etc.), tabelas com uma linha de cabeçalho e a ferramenta de inserir qualquer coisa com opções de inserir um bloco de código R, um bloco de código Python, um div, uma lista não enumerada, uma lista enumerada ou um título de primeiro nível (são algumas das primeiras opções da ferramenta).">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-visual-editor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;28.5: Editor visual Quarto.
</figcaption></figure>
</div>
</div>
</div>
<p>Inserir e personalizar como os conteúdos são exibidos também é mais fácil com o uso do editor visual. Você pode colar uma imagem diretamente da sua área de transferência no editor visual (e o RStudio colocará uma cópia daquela imagem no diretório do projeto e montarará um link para ela) ou usar o menu Insert &gt; Figure / Image do editor visual para navegar até a imagem desejada para inserir ou colar sua URL. Além disso, usando o mesmo menu você pode redimensionar a imagem e adicionar uma legenda, texto alternativo e um link.</p>
<p>O editor visual tem muito mais recursos que não enumeramos aqui que podem ser úteis a você na medida em que você ganha experiência em escrever com a ferramenta.</p>
<p>Mais importante, enquanto o editor visual exibe o conteúdo do documento com formatação, por trás ele salva o conteúdo em Markdown, permitindo transitar entre o editor visual e de código (<em>source</em>) para visualizar e editar o documento usando qualquer uma das ferramentas.</p>
<section id="exercícios-1" class="level3" data-number="28.3.1"><h3 data-number="28.3.1" class="anchored" data-anchor-id="exercícios-1">
<span class="header-section-number">28.3.1</span> Exercícios</h3>
<ol type="1">
<li>Crie novamente o documento em <a href="#fig-visual-editor" class="quarto-xref">Figura&nbsp;<span>28.5</span></a> usando o editor visual.</li>
<li>Usando o editor visual, insira um bloco de código usando o menu Insert e depois faça o mesmo usando qualquer ferramenta.</li>
<li>Usando o editor visual, descubra como:
<ol type="a">
<li>Adicionar uma nota de rodapé.</li>
<li>Adicionar uma linha horizontal.</li>
<li>Adicionar um bloco de citação.</li>
</ol>
</li>
<li>Usando o editor visual, vá em Insert &gt; Citation e insira a citação para o artigo cujo título é <a href="https://joss.theoj.org/papers/10.21105/joss.01686">Welcome to the Tidyverse</a> usando o DOI (<em>digital object identifier</em>), que é <a href="https://doi.org/10.21105/joss.01686">10.21105/joss.01686</a>. Renderize o documento e observe como a referência aparece no documento. Que alteração você consegue identificar no YAML do seu documento?</li>
</ol></section></section><section id="sec-source-editor" class="level2" data-number="28.4"><h2 data-number="28.4" class="anchored" data-anchor-id="sec-source-editor">
<span class="header-section-number">28.4</span> Editor Source</h2>
<p>Também é possível editar documentos Quarto usando o editor Source no RStudio, sem a assistência do editor visual. Enquanto o editor Visual será familiar para aqueles com experiência em escrita com ferramentas como Google docs, o editor Source será familia para aqueles com experiência escrevendo scripts R ou documentos R Markdown. O editor Source também pode ser útil para procurar erros (<em>debugging</em>) de sintaxe Quarto, já que muitas vezes é mais fácil achar esses erros em texto simples.</p>
<p>O guia abaixo mostra como usar o Markdown do Pandoc para escrever documentos Quarto em seu editor fonte.</p>
<div class="cell">
<pre><code>## Formatação de texto

*itálico* **negrito** ~~taxado~~ `código`

sobrescrito^2^ subscrito~2~

[sublinhado]{.sublinhado} [small caps]{.smallcaps}

## Títulos

# Título Nível 1

## Título Nível 2

### Título Nível 3

## Listas

-   Item de lista não enumerada 1

-   Item 2

    -   Item 2a

    -   Item 2b

1.  Item de lista enumerada 1

2.  Item 2.
    Os números são incrementados automaticamente na saída.

## Links e imagens

&lt;http://example.com&gt;

[frase com link](http://example.com)

![texto de legenda opcional](quarto.png){fig-alt="Logomarca Quarto com a palavra quarto escrita em letras minúsculas"}

## Tabelas

| Primeiro título    | Segundo título     |
|--------------------|--------------------|
| Célula de conteúdo | Célula de conteúdo |
| Célula de conteúdo | Célula de conteúdo |</code></pre>
</div>
<p>A melhor forma de aprender essas coisas é simplesmente tentar. Isso levará alguns dias, mas em pouco tempo se tornam algo automático e não será necessário pensar tanto sobre elas. Se você se esquecer, pode buscar uma boa folha de referência em <em>Help &gt; Markdown Quick Reference</em>.</p>
<section id="exercícios-2" class="level3" data-number="28.4.1"><h3 data-number="28.4.1" class="anchored" data-anchor-id="exercícios-2">
<span class="header-section-number">28.4.1</span> Exercícios</h3>
<ol type="1">
<li><p>Pratique o que você aprendeu criando um currículo (CV) breve. O título deve ser o seu nome e você deve incluir cabeçalhos para pelo menos sua educação ou trabalho. Cada uma das seções deve incluir uma lista em tópicos de trabalhos/títulos. Destaque o ano em negrito.</p></li>
<li>
<p>Usando o editor source e a referência rápida para Markdown, descubra como:</p>
<ol type="a">
<li>Adicionar uma nota de rodapé.</li>
<li>Adicionar uma linha horizontal.</li>
<li>Adicionar um bloco de citação.</li>
</ol>
</li>
<li><p>Copie e cole o conteúdo de <code>diamond-sizes.qmd</code> a partir de <a href="https://github.com/cienciadedatos/pt-r4ds/tree/main/quarto" class="uri">https://github.com/cienciadedatos/pt-r4ds/tree/main/quarto</a> para um arquivo R Quarto local. Verifique se você consegue executá-lo, então adicione texto depois do polígono de frequências que descreve suas características mais chamativas.</p></li>
<li><p>Crie um documento em Google doc ou MS Word (ou use um documento que você tenha criado previamente) que contenha títulos, hiperlinks, texto formatado, etc. Copie os conteúdos desse documento e cole-os em um documento quarto no editor visual. Em seguida, troque para o editor source e inspecione o código fonte.</p></li>
</ol></section></section><section id="blocos-de-código" class="level2" data-number="28.5"><h2 data-number="28.5" class="anchored" data-anchor-id="blocos-de-código">
<span class="header-section-number">28.5</span> Blocos de Código</h2>
<p>Para executar código em um documento Quarto, é necessário incluir um bloco de código. Há três maneiras de fazer isso:</p>
<ol type="1">
<li><p>O atalho de teclado Cmd + Option + I / Ctrl + Alt + I.</p></li>
<li><p>O botão “Insert” na barra de ferramentas do editor.</p></li>
<li><p>Escrevendo manualmente os limitadores de bloco <code>```{r}</code> e <code>```</code>.</p></li>
</ol>
<p>Recomendamos que você aprenda o atalho de teclado. Isso economizará muito tempo no longo prazo!</p>
<p>É possível prosseguir para a execução do código usando o atalho que agora (temos fé!) que você conhece e ama:Cmd/Ctrl + Enter. No entanto, blocos de código recebem um novo atalho: Cmd/Ctrl + Shift + Enter, que executa todo o código no bloco. Pense no bloco de código como uma função. Um bloco de código deve ser relativamente autocontido, focado em realizar uma única tarefa.</p>
<p>As seções a seguir descrevem o cabeçalho do bloco de código, que consiste em <code>```{r}</code>, seguido de um rótulo opcional e diversas outras opções de bloco, cada uma em sua própria linha, marcada por <code>#|</code>.</p>
<section id="rótulo-do-bloco-de-código" class="level3" data-number="28.5.1"><h3 data-number="28.5.1" class="anchored" data-anchor-id="rótulo-do-bloco-de-código">
<span class="header-section-number">28.5.1</span> Rótulo do bloco de código</h3>
<p>Blocos de código podem receber um rótulo opcional, por exemplo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: adicao-simples</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="in">1 + 1</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
</div>
<p>Há três vantagens nisso:</p>
<ol type="1">
<li>É possível navegar mais facilmente para blocos de código específicos usando o navegador em lista no canto inferior esquerdo do editor do script:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="screenshots/quarto-chunk-nav.png" class="img-fluid figure-img" style="width:30.0%" alt="Trecho da IDE RStudio mostrando apenas o navegador de código drop-down que mostra três blocos de código. Bloco 1 é setup. Bloco 2 é cars e nele há uma seção chamada Quarto. Bloco 3 é pressão (pressure) e está em uma seção chamada Including plots."></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><p>Gráficos produzidos pelos blocos de código terão nomes úteis para reutilizá-los em outros lugares. Mais sobre isso em <a href="#sec-figures" class="quarto-xref"><span>Seção 28.6</span></a>.</p></li>
<li><p>É possível organizar redes de bloco de código em cache para evitar múltiplas execuções de computações caras em toda execução. Mais sobre isso em <a href="#sec-caching" class="quarto-xref"><span>Seção 28.8</span></a>.</p></li>
</ol>
<p>Os rótulos dos seus blocos de código devem ser curtos, mas evocativos e não devem conter espaços. Recomendamos o uso de traços (<code>-</code>) para separar palavras (em vez de sublinhados, <code>_</code>) e evitar o uso de outros caracteres especiais nos rótulos de código.</p>
<p>Em geral, você é livre para rotular o bloco de código como quiser, mas há um bloco cujo nome indica um coportamento especial: <code>setup</code>. Quando você está no modo <em>notebook</em>, o bloco de código com nome <em>setup</em> será executado automaticamente uma vez antes que todo o seu código seja executado.</p>
<p>Além disso, rótulos não podem ser duplicados. Cada rótulo de bloco de código deve ser único.</p>
</section><section id="opções-de-bloco-de-código-chunk-options" class="level3" data-number="28.5.2"><h3 data-number="28.5.2" class="anchored" data-anchor-id="opções-de-bloco-de-código-chunk-options">
<span class="header-section-number">28.5.2</span> Opções de bloco de código (<em>chunk options</em>)</h3>
<p>Saídas de blocos de código podem ser personalizadas com campos de opções (<strong>options</strong>) fornecidos para o cabeçalho do bloco. Quase 60 opções para personalização dos seus blocos de código são fornecidas pelo Knitr. Aqui cobriremos as opções mais importantes, que você utilizará com frequência. É possível verificar a lista completa em <a href="https://yihui.org/knitr/options/" class="uri">https://yihui.org/knitr/options</a>.</p>
<p>O conjunto mais importante de opções controla se seu código será executado e que resultados serão exibidos no relatório final:</p>
<ul>
<li><p><code>eval: false</code> previne o código de ser avaliado. (E obviamente, se o código não é executado, nenhum resultado será gerado). Isso é útil para exibir um código de exemplo ou para desabilitar um grande bloco de código sem comentar cada uma de suas linhas.</p></li>
<li><p><code>include: false</code> executa o código, mas não o mostra nem inclui seus resultados no documento final. Use isso para códigos de configurações cujos resultados você não quer que dêem uma aparência de desordem no seu relatório.</p></li>
<li><p><code>echo: false</code> evita o código mas permite a exibição dos resultados no arquivo finalizado. Use isso quando estiver escrevendo relatórios direcionados a pessoas que não querem ver o código por trás dos resultados.</p></li>
<li><p><code>message: false</code> ou <code>warning: false</code> previne o aparecimento de mensagens ou avisos no arquivo final.</p></li>
<li><p><code>results: hide</code> esconde os resultados; <code>fig-show: hide</code> esconde gráficos.</p></li>
<li><p><code>error: true</code> permite que a renderização do seu documento continue mesmo que ocorra um erro. Você raramente precisará incluir isso na versão final do seu relatório, mas pode ser útil se você precisa corrigir um erro específico dentro do seu <code>.qmd</code>. Também é útil se você está ensinando R e quer incluir um erro deliberadamente. O padrão, <code>error: false</code> impede a renderização caso exista qualquer erro no documento.</p></li>
</ul>
<p>Cada uma dessas opções de bloco de código é adicionada ao cabeçalho do bloco, seguindo <code>#|</code>, por exemplo, no bloco a seguir o resultado não é impresso, já que <code>eval</code> está marcado como <em>false</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: multiplicacao-simples</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="in">#| eval: false</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="in">2 * 2</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A tabela a seguir resume que tipos de saída cada opção suprime:</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 9%">
</colgroup>
<thead><tr class="header">
<th>Opção</th>
<th style="text-align: center;">Executa código</th>
<th style="text-align: center;">Mostra código</th>
<th style="text-align: center;">Resultados</th>
<th style="text-align: center;">Gráficos</th>
<th style="text-align: center;">Mensagens</th>
<th style="text-align: center;">Avisos</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>eval: false</code></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td><code>include: false</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td><code>echo: false</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td><code>results: hide</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td><code>fig-show: hide</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td><code>message: false</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td><code>warning: false</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
</tbody>
</table></section><section id="opções-globais" class="level3" data-number="28.5.3"><h3 data-number="28.5.3" class="anchored" data-anchor-id="opções-globais">
<span class="header-section-number">28.5.3</span> Opções Globais</h3>
<p>Na medida em que você trabalhar mais com o knitr, você descobrirá que algumas das opções padrão dos blocos não satisfazem a sua necessidade e será preciso alterá-las.</p>
<p>É possível fazer isso adicionando suas opções preferidas no YAML do documento em <code>execute</code>. Por exemplo, se você estiver preparando um relatório para uma audiência que não precisa ver seu código, mas apenas seus resultados e narrativa, pode ser que seja desejável configurar <code>echo: false</code> no nível do documento. Isso esconderá o código por padrão e só exibirá blocos de código que você escolha mostrar ( com <code>echo: true</code>). Você pode configurar <code>message: false</code> e <code>warning: false</code>, mas isso tornará difícil a resolução de problemas de execução porque nenhuma das mensagens serão exibidas no final do documento.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My report"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">execute</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">echo</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Como o Quarto foi desenhado para ser multi-línguas (funciona com R mas também com outras linguagens como Python, Julia, etc.), nem todas as opções do knitr estão disponíveis no nível de documento. Algumas das opções funcionam com knitr mas não com outros motores (<em>engines</em>) que o Quarto usa para executar código em outras linguagens (por exemplo, Jupyter). No entanto é possível ajustar essas como opções globais para o seu documento dentro do campo <code>knitr</code> em <code>opts_chunk</code>. Por exemplo, quando escrevemos livros ou tutoriais, configuramos:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Tutorial"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">knitr</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">opts_chunk</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">comment</span><span class="kw">:</span><span class="at"> </span><span class="st">"#&gt;"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">collapse</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Isso faz com que nossa formatação para comentários preferida seja usada e garante que o código e seu resultado sejam exibidos próximos um do outro.</p>
</section><section id="código-em-linha" class="level3" data-number="28.5.4"><h3 data-number="28.5.4" class="anchored" data-anchor-id="código-em-linha">
<span class="header-section-number">28.5.4</span> Código em linha</h3>
<p>Existe outra maneira de inserir código R em um documento Quarto: diretamente no texto com <code>`r `</code>. Isso pode ser muito útil se você for citar propriedades dos seus dados no texto. Por exemplo, o documento modelo usado no começo do capítulo tinha:</p>
<blockquote class="blockquote">
<p>Temos dados sobre <code>`r nrow(diamonds)`</code> diamantes. Apenas <code>`r nrow(diamonds) - nrow(smaller)`</code> são maiores que 2.5 quilates. A distribuição dos restantes é exibida abaixo:</p>
</blockquote>
<p>Quando o relatório é renderizado, os resultados dessas computações são inseridas no texto:</p>
<blockquote class="blockquote">
<p>Temos dados sobre 53940 diamantes. Apenas 126 são maiores que 2.5 quilates. A distribuição dos restantes é exibida abaixo:</p>
</blockquote>
<p>Ao inserir números no texto, <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> é seu amigo. A função permite configurar o número de <code>digits</code> (casas decimais) para que você não imprima o número com um grau de precisão que chega a ser ridículo e <code>big.mark</code> para facilitar a leitura dos números. Você pode combiná-las em uma função auxiliar:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">comma</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">2</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="fu">comma</span><span class="op">(</span><span class="fl">3452345</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "3,452,345"</span></span>
<span><span class="fu">comma</span><span class="op">(</span><span class="fl">.12358124331</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "0.12"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exercícios-3" class="level3" data-number="28.5.5"><h3 data-number="28.5.5" class="anchored" data-anchor-id="exercícios-3">
<span class="header-section-number">28.5.5</span> Exercícios</h3>
<ol type="1">
<li><p>Adicione uma seção que explore como o tamanho de diamantes varia de acordo com corte, cor e transparência. Considere que você está escrevendo um relatório para alguém que não sabe R e em vez de usar <code>echo: false</code> em cada bloco, configure como uma opção global.</p></li>
<li><p>Faça o download de <code>diamond-sizes.qmd</code> de <a href="https://github.com/hadley/r4ds/tree/main/quarto" class="uri">https://github.com/hadley/r4ds/tree/main/quarto</a>. Adicione uma seção que descreva os 20 maiores diamantes, incluindo uma tabela que mostre seus atributos mais importantes.</p></li>
<li><p>Modifique <code>diamonds-sizes.qmd</code> para usar <code>label_comma()</code> e produzir um resultado bem formatado. Inclua também a percentagem de diamantes que são maiores que 2.5 quilates.</p></li>
</ol></section></section><section id="sec-figures" class="level2" data-number="28.6"><h2 data-number="28.6" class="anchored" data-anchor-id="sec-figures">
<span class="header-section-number">28.6</span> Figuras</h2>
<p>As figuras em um documento Quarto podem ser integradas (como um arquivo PNG ou JPEG) ou geradas como resultado de um bloco de código.</p>
<p>Para integrar uma imagem a partir de um arquivo externo, é possível usar o menu Insert no editor Visual no RStudio e selecionar Figure / Image. Isso abrirá um menu em que é possível buscar a imagem que você deseja inserir, assim como adicionar um texto alternativo ou legenda e ajustar seu tamanho.</p>
<p>No editor visual também é possível simplesmente colar uma imagem da sua área de transferência no documento, então o RStudio inserirá uma cópia daquela imagem na pasta do seu projeto.</p>
<p>Se você incluir um bloco de código que gera uma figura (como uma chamada a <code>ggplot()</code>), a imagem resultante será automaticamente incluída no seu documento Quarto.</p>
<section id="tamanho-de-figura" class="level3" data-number="28.6.1"><h3 data-number="28.6.1" class="anchored" data-anchor-id="tamanho-de-figura">
<span class="header-section-number">28.6.1</span> Tamanho de figura</h3>
<p>O maior desafio ao trabalhar com imagens no Quarto é fazer com que elas fiquem do tamanho e no formato corretos. Há cinco opções principais que controlam o tamanho da figura: <code>fig-width</code>, <code>fig-height</code>, <code>fig-asp</code>, <code>out-width</code> e <code>out-height</code>. Ajustar o tamanho é desafiador porque há dois tamanhos (aquele da figura criada pelo R e aquele que é inserido no documento final) e múltiplas formas de especificar tamanho (isto é, altura, largura e <em>aspect ratio</em> - proporcional: escolha dois dos três).</p>
<p>Recomendamos três das cinco opções:</p>
<ul>
<li><p>Gráficos tendem a ser esteticamente mais agradáveis se têm largura consistente. Para garantir isso, configure <code>fig-width: 6</code> (6 polegadas) e <code>fig-asp: 0.618</code> (a razão áurea) nas definições padrão. Nos blocos individuais, ajuste apenas <code>fig-asp</code>.</p></li>
<li>
<p>Controle o tamanho da saída com <code>out-width</code> e configure como uma percentagem da largura do corpo do documento. Sugerimos <code>out-width: "70%"</code> e <code>fig-align: center</code>.</p>
<p>Isso dá espaço para os gráficos respirarem, sem tomar espaço demais.</p>
</li>
<li><p>Para inserir múltiplos gráficos na mesma linha, configure <code>layout-ncol</code> em 2 para dois gráficos, 3 para três gráficos, etc. Isso efetivamente ajusta <code>out-width</code> para “50%” para cada gráfico se <code>layout-ncol</code> for 2, “33%” se <code>layout-ncol</code> for 3, etc. Dependendo do que você está tentando ilustrar (por exemplo, mostrar dados ou variações de gráficos), você pode experimentar ajustar também <code>fig-width</code> conforme a discussão a seguir.</p></li>
</ul>
<p>Se você perceber que está precisando apertar os olhos para enxergar o texto no seu gráfico, você precisa ajustar o <code>fig-width</code>. Se <code>fig-width</code> é maior que o tamanho da figura renderizada no documento final, o texto ficará muito pequeno; se <code>fig-width</code> for menor, o texto ficará grande demais. Frequentemente será necessário alguma experimentação para acertar a razão entre <code>fig-width</code> e a largura do seu documento. Para ilustrar, os três gráficos a seguir têm <code>fig-width</code> de 4, 6, e 8 respectivamente:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="quarto_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" style="width:50.0%" alt="Gráfico de dispersão de milhagem em rodovia vs. deslocamento dos carros, em que os pontos têm tamanho comum e o texto dos eixos e rótulos têm tamanho de fonte similar ao texto em volta."></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="quarto_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:50.0%" alt="Gráfico de dispersão de milhagem em rodovia vs. deslocamento dos carros, em que os pontos têm tamanho menor que os do gráfico anterior e o texto dos eixos e rótulos têm tamanho menor que o texto em volta."></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="quarto_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" style="width:50.0%" alt="Gráfico de dispersão de milhagem em rodovia vs. deslocamento dos carros, em que os pontos têm tamanho ainda menor que os do gráfico anterior e o texto dos eixos e rótulos têm tamanho ainda menor que o texto em volta."></p>
</figure>
</div>
</div>
</div>
<p>Se você quiser garantir que o tamanho da fonte seja consistente em todas as suas figuras, será necessário ajustar sempre o <code>out-width</code> com o <code>fig-width</code> para manter a mesma razão com o <code>out-width</code> padrão. Por exemplo, se seu <code>fig-width</code> padrão é 6 e o <code>out-width</code> está em “70%”, será necessário configurar <code>fig-width</code> a 4.3 (6 * 0.5 / 0.7) quando ajustar <code>out-width: "50%"</code>.</p>
<p>Entender dimensionamento é uma arte e uma ciência e acertar essas coisas pode requerer uma abordagem de tentativa e erro. Você pode aprender mais sobre isso no <a href="https://www.tidyverse.org/blog/2020/08/taking-control-of-plot-scaling/">post de blog tomando controle de dimensionamento de gráficos</a>.</p>
</section><section id="outras-opções-importantes" class="level3" data-number="28.6.2"><h3 data-number="28.6.2" class="anchored" data-anchor-id="outras-opções-importantes">
<span class="header-section-number">28.6.2</span> Outras opções importantes</h3>
<p>Quando estamos trabalhando com código e texto, como neste livro, é possível ajustar <code>fig-show: hold</code> de modo que os gráficos sejam exibidos após o código. Isso rende o efeito agradável de nos forçar a quebrar blocos de código grandes em menores com suas explicações.</p>
<p>Para adicionar uma legenda ao gráfico, use <code>fig-cap</code>. No Quarto isso mudará a figura de <em>inline</em> (no meio do texto) para “<em>floating</em>”.</p>
<p>Se você está produzindo PDF, o tipo de gráfico padrão é PDF. Isso é um bom padrão porque PDFs são gráficos vetoriais de alta qualidade. No entanto, isso pode gerar gráficos muito grandes e lentos se você está exibindo milhares de pontos. Nesse caso, ajuste <code>fig-format: "png"</code> para forçar o uso de PNGs. Esses têm qualidade ligeiramente menor, mas são muito mais compactos.</p>
<p>É uma boa ideia dar rótulos a blocos de código que produzam figuras, mesmo que você rotineiramente não faça isso. O rótulo do bloco é usado para gerar o nome de arquivo do gráfico salvo em disco, então nomear seus blocos facilita muito a identificação dos gráficos e reutilizá-los em outras circunstâncias (por exemplo, quando é necessário pegar um único gráfico para enviar um email).</p>
</section><section id="exercícios-4" class="level3" data-number="28.6.3"><h3 data-number="28.6.3" class="anchored" data-anchor-id="exercícios-4">
<span class="header-section-number">28.6.3</span> Exercícios</h3>
<ol type="1">
<li><p>Abra <code>diamond-sizes.qmd</code> no editor visual, ache uma imagem de diamante, copie e cole no documento. Clique duas vezes na imagem e adicione uma legenda. Redimensione a imagem e renderize o documento. Observe como a imagem é salva no seu diretório de trabalho.</p></li>
<li><p>Edite o rótulo do bloco de código em <code>diamond-sizes.qmd</code> que gera um gráfico para que comece com o prefixo <code>fig-</code> e adicione uma legenda à figura com a opção de bloco <code>fig-cap</code>. Em seguida, edite o texto acima do bloco de código e adicione uma referência cruzada para a figura com Insert &gt; Cross Reference.</p></li>
<li>
<p>Mude o tamanho da figura com as seguintes opções de bloco, uma por vez, renderize o documento e descreva como a figura muda.</p>
<ol type="a">
<li><p><code>fig-width: 10</code></p></li>
<li><p><code>fig-height: 3</code></p></li>
<li><p><code>out-width: "100%"</code></p></li>
<li><p><code>out-width: "20%"</code></p></li>
</ol>
</li>
</ol></section></section><section id="tabelas" class="level2" data-number="28.7"><h2 data-number="28.7" class="anchored" data-anchor-id="tabelas">
<span class="header-section-number">28.7</span> Tabelas</h2>
<p>Semelhante ao apresentado para figuras, é possível incluir dois tipos de tabelas em um documento Quarto. Elas podem ser tabelas markdown que você pode criar diretamente em seu documento Quarto (usando o menu Insert Table) ou podem ser geradas como resultado de um bloco de código. Nesta seção focaremos na segunda, tabelas geradas via computação.</p>
<p>Por padrão, Quarto imprime <em>data frames</em> e matrizes como você as veria no console:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span><span class="co">#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se voce preferir que os dados sejam expostos com formatação adicional, você pode usar a função <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable()</a></code>. O código abaixo gera <a href="#tbl-kable" class="quarto-xref">Tabela&nbsp;<span>28.1</span></a>.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, <span class="op">)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-kable" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-kable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;28.1: Uma tabela feita com knitr (<em>kable</em>).
</figcaption><div aria-describedby="tbl-kable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 26%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
<th style="text-align: right;">carb</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Leia a documentação para <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">?knitr::kable</a></code> para ver de que outras formas você pode personalizar a sua tabela. Para uma personalização ainda mais profunda, considere os pacotes <strong>gt</strong>, <strong>huxtable</strong>, <strong>reactable</strong>, <strong>kableExtra</strong>, <strong>xtable</strong>, <strong>stargazer</strong>, <strong>pander</strong>, <strong>tables</strong>, e <strong>ascii</strong>. Cada um fornece um conjunto de ferramentas para retornar tabelas formatadas a partir de código R.</p>
<section id="exercícios-5" class="level3" data-number="28.7.1"><h3 data-number="28.7.1" class="anchored" data-anchor-id="exercícios-5">
<span class="header-section-number">28.7.1</span> Exercícios</h3>
<ol type="1">
<li>Abra <code>diamond-sizes.qmd</code> no editor visual, insira um bloco de código e adicione uma tabela com <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable()</a></code> que mostre as 5 primeiras linhas do <em>data frame</em> <code>diamonds</code>.</li>
<li>Exiba a mesma tabela com <code>gt::gt()</code>.</li>
<li>Adicione um rótulo de bloco de código que comece com o prefixo <code>tbl-</code> e adicione a legenda para a tabela com a opção de bloco <code>tbl-cap</code>. Depois edite o texto acima do bloco de código para adicionar a referência cruzada para a tabela com Insert &gt; Cross Reference.</li>
</ol></section></section><section id="sec-caching" class="level2" data-number="28.8"><h2 data-number="28.8" class="anchored" data-anchor-id="sec-caching">
<span class="header-section-number">28.8</span> Salvando em cache</h2>
<p>Normalmente, cada renderização do documento começa de uma folha em branco. Isso é ótimo para reprodutibilidade porque garante que você capturou toda computação importante em código. No entanto, pode ser doloroso refazer computações que tomam um tempo longo. A solução para isso é <code>cache: true</code>.</p>
<p>É possível habilitar o cache do knitr no nível do documento para guardar em cache os resultados de todas as computações em um documento usando as opções padrão de YAML:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Meu documento"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">execute</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Também é possível permitir <em>caching</em> no nível de bloco para guardar os resultados da computação de um bloco específico em cache.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| cache: true</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="in"># código para uma computação longa...</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando configurado, isso salvará os resultados do bloco para um arquivo de nome especial em seu disco de armazenamento. Em execuções subsequentes, o knitr verificará se houve alguma alteração no código e caso isso não tenha acontecido os resultados em cache serão reutilizados.</p>
<p>O sistema de cache deve ser usado com cuidado porque, por padrão, é usado apenas no código, e não em suas dependências. Por exemplo, aqui o bloco <code>dados_processados</code> depende do bloco <code>dados-crus</code>:</p>
<pre><code>``` {{r}}
#| label: dados-crus
#| cache: true

dadoscrus &lt;- readr::read_csv("um_arquivo_enorme.csv")
```</code></pre>
<pre><code>``` {{r}}
#| label: dados_processados
#| cache: true

dados_processados &lt;- dadoscrus |&gt; 
  filter(!is.na(var_importante)) |&gt; 
  mutate(nova_variavel = transformacao_complicada(x, y, z))
```</code></pre>
<p>Guardar o bloco <code>processed_data</code> em cache signigica que ele será executado novamente se o <em>pipeline</em> de dplyr for alterado, mas não se a chamada de <code>read_csv()</code> mudar. Esse problema pode ser evitado com a opção <code>dependson</code>:</p>
<pre><code>``` {{r}}
#| label: dados-processados
#| cache: true
#| dependson: "dados-brutos"

dados_processados &lt;- dadoscrus |&gt; 
  filter(!is.na(var_importante)) |&gt; 
  mutate(nova_variavel = transformacao_complicada(x, y, z))
```</code></pre>
<p><code>dependson</code> deve conter um vetor de caracteres em <em>todos</em> os blocos de que o bloco em cache depende. O knitr atualizará os resultados para o bloco em cache sempre que detectar que uma de suas dependências mudou.</p>
<p>Note que os blocos não serão atualizados se <code>um_arquivo_enorme.csv</code> mudar, já que o cache do knitr só monitora alterações no arquivo <code>.qmd</code>. Se você quiser também monitorar mudanças naquele arquivo, é possível usar a opção <code>cache.extra</code>. Essa é uma expressão de R arbitrária que invalida o cache toda vez que há alteração. Uma boa função neste caso é <code><a href="https://rdrr.io/r/base/file.info.html">file.mtime()</a></code>: a função retorna quando foi a última alteração. Você pode então escrever:</p>
<pre><code>``` {{r}}
#| label: raw-data
#| cache: true
#| cache.extra: !expr file.mtime("um_arquivo_enorme.csv")

dadoscrus &lt;- readr::read_csv("um_arquivo_enorme.csv")
```</code></pre>
<p>Seguimos o conselho de <a href="https://twitter.com/drob/status/738786604731490304">David Robinson</a> para nomear esses blocos: cada um é nomeado de acordo com o objeto primário que é criado. Isso facilita a compreensão da especificação de <code>dependson</code>.</p>
<p>Na medida em que suas estratégias de cache vão complicando, é uma boa ideia limpar todo o seu cache com <code><a href="https://rdrr.io/pkg/knitr/man/clean_cache.html">knitr::clean_cache()</a></code>.</p>
<section id="exercícios-6" class="level3" data-number="28.8.1"><h3 data-number="28.8.1" class="anchored" data-anchor-id="exercícios-6">
<span class="header-section-number">28.8.1</span> Exercícios</h3>
<ol type="1">
<li>Ajuste uma sequência de blocos em que <code>d</code> depende de <code>c</code> e <code>b</code> e os dois últimos dependem de <code>a</code>. Faça com que cada bloco imprima <code><a href="https://lubridate.tidyverse.org/reference/now.html">lubridate::now()</a></code>, ajuste <code>cache: true</code> e verifique o que você entendeu sobre <em>caching</em>.</li>
</ol></section></section><section id="resolução-de-problemas" class="level2" data-number="28.9"><h2 data-number="28.9" class="anchored" data-anchor-id="resolução-de-problemas">
<span class="header-section-number">28.9</span> Resolução de problemas</h2>
<p>Resolver problemas em documentos Quarto pode ser desafiador porque você não está mais em um ambiente interativo de R, então você precisará aprender uns truques novos. Além disso, o erro pode ter ocorrido devido a problemas no documento de Quarto ou mesmo devido ao código em R no documento.</p>
<p>Um erro comum em documentos com blocos de código é haver rótulos de blocos duplicados, o que tem certa ocorrência se o seu fluxo de trabalho envolve copiar e colar de blocos de código. Para abordar esse problema, tudo que você precisa fazer é mudar o nome de um dos seus rótulos duplicados.</p>
<p>Se os erros ocorrem por causa do código em R no documento, a primeira coisa que você deveria fazer sempre é tentar recriar o problema em uma sessão interativa. Reinicie o R, depois execute todos os blocos (<em>Run all chunks</em>) via <em>Run region</em> no menu Code ou com o atalho Ctrl + Alt + R. Se estiver com sorte, isso recriará o problema e você descobrirá o que está acontecendo interativamente.</p>
<p>Se isso não ajudar, deve haver algo diferente entre o seu ambiente interativo e o seu ambiente Quarto. Será necessário explorar as opções sistematicamente. A diferença mais comum é o diretório de trabalho: o diretório de trabalho de um documento Quarto é aquele em que o documento vive. Verifique se o diretório é o que você espera usando <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> em um bloco.</p>
<p>A seguir, tente listar todas as coisas que poderiam causar o <em>bug</em>. Será necessário verificar sistematicamente se essas coisas são as mesmas na sua sessão R e na sua sessão Quarto. A forma mais fácil de fazer isso é ajustar <code>error: true</code> no bloco causando o problema e usar <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> e <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> para verificar que as configurações são o que você espera.</p>
</section><section id="cabeçalho-yaml" class="level2" data-number="28.10"><h2 data-number="28.10" class="anchored" data-anchor-id="cabeçalho-yaml">
<span class="header-section-number">28.10</span> Cabeçalho YAML</h2>
<p>É possível controlar muitas outras configurações de “documento inteiro” ajustando os parâmetros do cabeçalho YAML. Você pode estar pensando no que significa YAML: é “<em>YAML Ain’t Markup Language</em>” ou “YAML não é linguagem Markup” – mas não carrega a sigla em português. A linguagem foi projetada para representar dados hierárquicos de uma forma que seja fácil para humanos lerem e escreverem. Quarto usa isso para controlar muitos detalhes da saída. Aqui discutiremos três: documentos autocontidos, parâmetros de documentos e bibliografias.</p>
<section id="documentos-autocontidos" class="level3" data-number="28.10.1"><h3 data-number="28.10.1" class="anchored" data-anchor-id="documentos-autocontidos">
<span class="header-section-number">28.10.1</span> Documentos Autocontidos</h3>
<p>Documentos HTML tipicamente têm uma série de dependências externas (por exemplo imagens, guias de estilo CSS, JavaScript, etc.) e, por padrão, o Quarto coloca essas dependências em uma pasta <code>_files</code> no mesmo diretório que o seu arquivo <code>.qmd</code>. Se você publicar o arquivo HTML em uma plataforma (por exemplo, QuartoPub, <a href="https://quartopub.com/" class="uri">https://quartopub.com/</a>), as dependências desse diretório são publicadas com o documento e então estarão disponíveis no relatório publicado. No entanto, se você quer enviar o relatório para um colega por email, é possível que prefira ter um único documento HTML autocontido que tem suas dependências todas embutidas. Você pode fazer isso especificando a opção <code>embed-resources</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">embed-resources</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>O arquivo resultante será autocontido, de modo que não necessitará de qualquer arquivo interno nem de acesso à internet para ser exibido corretamente por um navegador.</p>
</section><section id="parâmetros" class="level3" data-number="28.10.2"><h3 data-number="28.10.2" class="anchored" data-anchor-id="parâmetros">
<span class="header-section-number">28.10.2</span> Parâmetros</h3>
<p>Documentos Quarto podem incluir um ou mais parâmetros cujos valores podem ser ajustados quando se renderiza o relatório. Parâmetros são úteis quando se quer executar mais vezes o mesmo relatório com valores diferentes para vários inputs chave. Por exemplo, pode ser que seja necessário produzir relatórios de vendas por filial, resultados de provas por aluno ou mesmo resumos demográficos por país. Para declarar um ou mais parâmetros, use o campo <code>params</code>.</p>
<p>Esse exemplo usa o parâmetro <code>my_class</code> para determinar que classe de carros será exibida:</p>
<div class="cell">
<pre><code>---
format: html
params:
  minha_classe: "suv"
---

```{r}
#| label: setup
#| include: false

library(tidyverse)
library(dados)

classe &lt;- milhas |&gt; filter(classe == params$minha_classe)
```

# Economia de combustível para `r params$minha_classe`

```{r}
#| message: false

ggplot(classe, aes(x = cilindrada, y = rodovia)) + 
  geom_point() + 
  geom_smooth(se = FALSE)
```</code></pre>
</div>
<p>Como se pode ver, parâmetros estão disponíveis dentro dos blocos de código como uma lista chamada <code>params</code> com permissão apenas de leitura.</p>
<p>É possível escrever vetores atômicos diretamente no cabeçalho YAML. É possível ainda executar expressões arbitrárias em R prefixando o valor do parâmetro com <code>!expr</code>. Essa é uma boa forma de especificar parâmetros de data/tempo.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">start</span><span class="kw">:</span><span class="at"> !expr lubridate::ymd("2015-01-01")</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">snapshot</span><span class="kw">:</span><span class="at"> !expr lubridate::ymd_hms("2015-01-01 12:30:00")</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="bibliografias-e-citações" class="level3" data-number="28.10.3"><h3 data-number="28.10.3" class="anchored" data-anchor-id="bibliografias-e-citações">
<span class="header-section-number">28.10.3</span> Bibliografias e citações</h3>
<p>Bibliografia e citações podem ser automaticamente geradas pelo Quarto em uma série de estilos. A forma mais direta de adicionar citações e bibliografias no seu documento Quarto é usando o editor visual no RStudio.</p>
<p>Para adicionar a citação no editor visual, vá em Insert &gt; Citation. Citações podem ser inseridas a partir de uma variedade de fontes:</p>
<ol type="1">
<li><p>Referências <a href="https://quarto.org/docs/visual-editor/technical.html#citations-from-dois">DOI</a> (<em>Digital Object Identifier</em>).</p></li>
<li><p>Bibliotecas particulares ou de grupo do <a href="https://quarto.org/docs/visual-editor/technical.html#citations-from-zotero">Zotero</a>.</p></li>
<li><p>Pesquisas na <a href="https://www.crossref.org/">Crossref</a>, <a href="https://datacite.org/">DataCite</a>, ou na <a href="https://pubmed.ncbi.nlm.nih.gov/">PubMed</a>.</p></li>
<li><p>Seu documento de bibliografia (um arquivo <code>.bib</code> no diretório do seu documento).</p></li>
</ol>
<p>Internamente, o editor visual usa a representação padrão para citações do markdown Pandoc (por exemplo, <code>[@citation]</code>).</p>
<p>Se você inserir uma citação usando um dos primeiros três métodos, o editor visual automaticamente criará um arquivo <code>bibliography.bib</code> para você e adicionará a sua referência a ele. Isso também adicionará um campo <code>bibliography</code> ao YAML do documento. À medida em que você insere mais referências, esse arquivo é povoado com as citações. Também é possivel editar diretamente esse arquivo usando muitos formatos comuns como BibLaTeX, BibTeX, EndNote, Medline.</p>
<p>Para criar a citação dentro do seu arquivo <code>.qmd</code> no editor source, use a chave composta de ‘@’ + identificador da citação do seu arquivo de bibliografia. Em seguida, coloque a citação entre colchetes. Seguem alguns exemplos:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Separe múltiplas citações com <span class="in">`;`</span>: Blah blah <span class="co">[</span><span class="ot">@smith04; @doe99</span><span class="co">]</span>.</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>É possível inserir comentários arbitrários nos colchetes: </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>Blah blah <span class="co">[</span><span class="ot">veja @doe99, pp. 33-35; também @smith04, cap. 1</span><span class="co">]</span>.</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>Remova os colchetes para criar uma citação direta: @smith04 diz blah, ou @smith04 <span class="co">[</span><span class="ot">p. 33</span><span class="co">]</span> diz blah.</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>Adicione um <span class="in">`-`</span> antes da citação para suprimir o nome do autor:</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>Smith diz blah <span class="co">[</span><span class="ot">-@smith04</span><span class="co">]</span>.</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Quando o Quarto renderiza o seu arquivo, a bibliografia será construída e adicionada ao final do seu documento. A bibliografia conterá cada uma das citações do seu arquivo de bibliografia, mas não é criado um título no documento para ela. Como resultado, é uma prática comum finalizar o seu documento com um título de seção para a bibliografia como <code># Referências</code> ou <code># Bibliografia</code>.</p>
<p>É possível alterar o estilo das suas citações e bibliografia fazendo referência a um arquivo CSL (<em>citation style language</em> – ou linguagem de estilo de citação) no campo <code>csl</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> rmarkdown.bib</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">csl</span><span class="kw">:</span><span class="at"> apa.csl</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Assim como no campo de bibliografia, seu arquivo csl deve conter um caminho para o arquivo. Aqui assumimos que o arquivo CSL está no mesmo diretório que o arquivo <code>.qmd</code>. Um bom lugar para encontrar arquivos de estilo CSL para sua bibligrafia é em: <a href="https://github.com/citation-style-language/styles" class="uri">https://github.com/citation-style-language/styles</a>.</p>
</section></section><section id="fluxo-de-trabalho" class="level2" data-number="28.11"><h2 data-number="28.11" class="anchored" data-anchor-id="fluxo-de-trabalho">
<span class="header-section-number">28.11</span> Fluxo de trabalho</h2>
<p>Anteriormente discutimos um fluxo de trabalho básico para executar seu código R, trabalhando interativamente no <em>console</em>, e depois salvar o que funciona no <em>editor de script</em>. O Quarto junta o console e o editor de script, deixando menos clara a linha que separa a exploração interativa e captura de código para longo prazo. Você pode trabalhar interativamente dentro de um bloco, editando e executando novamente com Cmd/Ctrl + Shift + Enter. Quando o trabalho estiver bom, você pode continuar e criar um novo bloco de código.</p>
<p>O Quarto também é importante porque integra estreitamente texto e código. Isso faz do Quarto um ótimo <strong>caderno de análise</strong> (<em>analysis notebook</em>), porque permite desenvolver código e registrar seus pensamentos. Um caderno de análise compartilha muitos dos mesmos objetivos de um caderno de laboratório clássico nas ciências exatas. O caderno:</p>
<ul>
<li><p>Permite gravar o que você fez e por que você fez. Independentemente de quão boa é a sua memória, se você não registrar o que fez, chegará um momento em que você esquecerá os detalhes importantes. Escreva para não se esquecer!</p></li>
<li><p>Apoia o pensamento rigoroso. É mais provável que você desenvolva uma análise robusta se você registrar seus pensamentos enquanto trabalha, depois pode continuar a refletir sobre eles. Isso também economiza tempo quando você eventualmente organizar sua análise para compartilhar com outras pessoas.</p></li>
<li><p>Ajuda outras pessoas a entenderem o seu trabalho. É raro fazer análise de dados sozinho e você frequentemente fará parte de uma equipe. Um caderno de laboratório ajuda a compartilhar com seus colegas não apenas o que você fez, mas também porque você fez o que fez.</p></li>
</ul>
<p>Muitos dos bons conselhos sobre o uso efetivo de cadernos de laboratórios podem também ser traduzidos para cadernos de análise. Tiramos de nossa própria experiência e dos conselhos de Collin Purrington sobre cadenos de laboratório (<a href="https://colinpurrington.com/tips/lab-notebooks" class="uri">https://colinpurrington.com/tips/lab-notebooks</a>) para desenvolver essas dicas:</p>
<ul>
<li><p>Garanta que cada caderno tem um título descritivo, um nome evocativo e um primeiro parágrafo que descreve brevemente os objetivos de análise.</p></li>
<li>
<p>Use o campo de data do cabeçalho YAML para registrar a data em que você começou a trabalhar no caderno:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> 2016-08-23</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Use ISO8601 YYYY-MM-DD para não haver ambiguidade. Use mesmo que você não escreva datas desse jeito!</p>
</li>
<li><p>Se você passa muito tempo em uma ideia de análise e no final parece que não vai dar em nada, não apague! Faça uma breve anotação sobre o motivo de a análise ter falhado e deixe no caderno. Isso ajudará você a não cair na mesma rota quando voltar à análise no futuro.</p></li>
<li><p>Geralmente é melhor registrar dados fora do R. Se você precisa registrar um pequeno trecho dos dados, faça isso de forma explícita usando <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tibble::tribble()</a></code>.</p></li>
<li><p>Se você descobrir um erro no arquivo de dados, nunca o modifique diretamente. Em vez disso, escreva código para corrigir o valor. Escreva o motivo do reparo.</p></li>
<li><p>Antes de finalizar os trabalhos do dia, garanta que é possível renderizar o caderno. Se está usando <em>caching</em>, limpe os caches. Isso permitirá a correção de problemas enquanto o código ainda está fresco na memória.</p></li>
<li><p>Se você quiser que seu código seja reprodutível a longo prazo (por exemplo, para voltar a trabalhar nele no mês ou ano seguinte), pode ser necessário registrar as versões dos pacotes que seu código usa. Uma abordagem rigorosa é usar <strong>renv</strong>, <a href="https://rstudio.github.io/renv/index.html" class="uri">https://rstudio.github.io/renv/index.html</a>, que guarda os pacotes no seu diretório do projeto. Um macete é incluir um bloco que execute <code><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo()</a></code> — isso não permite facilmente recriar seus pacotes em seu estado atual, mas pelo menos ajuda a saber em que estado estavam.</p></li>
<li><p>Você criará muitos, muitos cadernos de análise no decorrer da sua carreira. Como você os organizará de modo que consiga achá-los no futuro? Recomendamos guardá-los em projetos individuais e criar um bom esquema de nomes.</p></li>
</ul></section><section id="resumo" class="level2" data-number="28.12"><h2 data-number="28.12" class="anchored" data-anchor-id="resumo">
<span class="header-section-number">28.12</span> Resumo</h2>
<p>Neste capítulo apresentamos o Quarto para escrita e publicação reprodutível de documentos computacionais que incluam seu código e seu texto no mesmo lugar. Você aprendeu sobre escrever em documentos Quarto no RStudio com o editor fonte ou visual, como blocos de código funcionam e como personalizar opções para cache de computações. Além disso, você aprendeu sobre ajustes no cabeçalho YAML para criar documentos autocontidos ou parametrizados, assim como incluir citações e bibliografia. Também demos dicas de fluxo de trabalho e de resolução de problemas.</p>
<p>Enquanto essa introdução deve ser suficiente para iniciar seu trabalho com Quarto, ainda há muito a aprender. Quarto ainda é relativamente jovem e ainda está crescendo rapidamente. O melhor lugar para se atualizar das últimas inovações é o site oficial: <a href="https://quarto.org/" class="uri">https://quarto.org</a>.</p>
<p>Há dois tópicos importantes que não cobrimos aqui: colaboração e detalhes para comunicar sua ideia com precisão para outros humanos. Colaboração é uma parte vital da ciência de dados moderna e você pode facilitar muito a sua vida usando ferramentas de controle de versão, como Git e GitHub. Recomendamos o livro “Happy Git with R”, uma introdução amigável ao Git e ao GitHub para quem programa em R, escrito pela Jenny Bryan. O livro está disponível online com acesso livre: <a href="https://happygitwithr.com" class="uri">https://happygitwithr.com</a>.</p>
<p>Também não comentamos sobre o que você deveria realmente escrever para comunicar seus resultados da sua análise com clareza. Para melhorar sua escrita, recomendamos muito a leitura de <a href="https://www.amazon.com/Style-Lessons-Clarity-Grace-12th/dp/0134080416"><em>Style: Lessons in Clarity and Grace</em></a> por Joseph M. Williams &amp; Joseph Bizup, ou <a href="https://www.amazon.com/Sense-Structure-Writing-Readers-Perspective/dp/0205296327"><em>The Sense of Structure: Writing from the Reader’s Perspective</em></a> por George Gopen. Ambos os livros ajudarão a entender a estrutura de frases e parágrafos e darão ferramentas para tornar sua escrita mais clara. (esses livros são um tanto caros, mas são muito usados em cursos de inglês, então há muitas cópias baratas de segunda mão). George Gopen também tem uma série de artigos curtos sobre escrita em <a href="https://www.georgegopen.com/the-litigation-articles.html" class="uri">https://www.georgegopen.com/the-litigation-articles.html</a>. Esses são direcionados a advogados, mas quase tudo se aplica a cientistas de dados também.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./communicate.html" class="pagination-link  aria-label=" comunicar="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">✅ Comunicar</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./quarto-formats.html" class="pagination-link" aria-label="<span class='chapter-number'>29</span>&nbsp; <span class='chapter-title'>✅ Formatos para Quarto</span>">
        <span class="nav-page-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">✅ Formatos para Quarto</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>R para Ciência de Dados (2ª edição) foi escrito por Hadley Wickham, Mine Çetinkaya-Rundel, e Garrett Grolemund.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/cienciadedatos/pt-r4ds/edit/main/quarto.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/cienciadedatos/pt-r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Este livro foi contruído com <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>